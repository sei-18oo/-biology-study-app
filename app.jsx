import React, { useState } from 'react';
import { CheckCircle, XCircle, Lightbulb, BookOpen } from 'lucide-react';
import { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell } from 'recharts';

const StudyApp = () => {
  const [screen, setScreen] = useState('menu');
  const [selectedCategory, setSelectedCategory] = useState(null);
  const [currentSubQIndex, setCurrentSubQIndex] = useState(0);
  const [answers, setAnswers] = useState({});
  const [showHint, setShowHint] = useState(false);
  const [showExplanation, setShowExplanation] = useState(false);
  const [submitted, setSubmitted] = useState(false);
  const [allResults, setAllResults] = useState({});
  const [aiAnalysis, setAiAnalysis] = useState('');
  const [loadingAnalysis, setLoadingAnalysis] = useState(false);
  
  // è¡Œå‹•è¿½è·¡ç”¨ã®çŠ¶æ…‹
  const [questionStartTime, setQuestionStartTime] = useState(Date.now());
  const [changeCount, setChangeCount] = useState(0);
  const [hintViewTime, setHintViewTime] = useState(null);
  const [explanationViewTime, setExplanationViewTime] = useState(null);

  // ç”Ÿç‰©åŸºç¤ã®å•é¡Œãƒ‡ãƒ¼ã‚¿
  const categories = [
    {
      id: 'bio-q1',
      name: 'å¤§å•1ï¼šç´°èƒã®æ§‹é€ ',
      title: 'ã€ç´°èƒã®æ§‹é€ ã€‘ç´°èƒãŒã©ã®ã‚ˆã†ãªæ§‹é€ ã‚’ã—ã¦ã„ã‚‹ã®ã‹ç¢ºèªã—ã‚ˆã†',
      text: `æ ¸ã¨ç´°èƒè³ªã‹ã‚‰ãªã‚‹ç´°èƒã¨ã€æ ¸ã‚’ã‚‚ãŸãªã„ç´°èƒã®é•ã„ã€ç´°èƒå°å™¨å®˜ã®å½¹å‰²ã€å˜ç´°èƒç”Ÿç‰©ã¨å¤šç´°èƒç”Ÿç‰©ã®é•ã„ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚`,
      questions: [
        { number: 1, question: 'æ ¸ã¨ç´°èƒè³ªã‹ã‚‰ãªã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['çœŸæ ¸ç´°èƒ'], hint: 'ã€ŒçœŸã€ã¨ã„ã†å­—ãŒãƒ’ãƒ³ãƒˆï¼æ ¸ãŒã€ŒçœŸã€ã«ã‚ã‚‹ç´°èƒ', explanation: 'çœŸæ ¸ç´°èƒï¼šæ ¸ã¨ç´°èƒè³ªãŒã‚ã‚‹ç´°èƒã€‚ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ã‚„è‘‰ç·‘ä½“ãªã©ã®ç´°èƒå°å™¨å®˜ã‚’æŒã¤ã€‚' },
        { number: 2, question: 'çœŸæ ¸ç´°èƒã‹ã‚‰ãªã‚‹ç”Ÿç‰©ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['çœŸæ ¸ç”Ÿç‰©'], hint: 'çœŸæ ¸ç´°èƒã§ã§ããŸç”Ÿç‰©ã ã‹ã‚‰...', explanation: 'çœŸæ ¸ç”Ÿç‰©ï¼šçœŸæ ¸ç´°èƒã‹ã‚‰ãªã‚‹ç”Ÿç‰©ã€‚å‹•ç‰©ã€æ¤ç‰©ã€èŒé¡ãªã©ã€‚' },
        { number: 3, question: 'æ ¸ã‚’ã‚‚ãŸãšã€DNAãŒç´°èƒè³ªåŸºè³ªã®ä¸­ã«å­˜åœ¨ã™ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['åŸæ ¸ç´°èƒ'], hint: 'ã€ŒåŸã€ã¨ã„ã†å­—ãŒãƒ’ãƒ³ãƒˆï¼åŸå§‹çš„ãªç´°èƒ', explanation: 'åŸæ ¸ç´°èƒï¼šæ ¸ã‚’æŒãŸãªã„ç´°èƒã€‚DNAãŒç´°èƒè³ªåŸºè³ªã«å­˜åœ¨ã™ã‚‹ã€‚' },
        { number: 4, question: 'åŸæ ¸ç´°èƒã‹ã‚‰ãªã‚‹ç”Ÿç‰©ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['åŸæ ¸ç”Ÿç‰©'], hint: 'åŸæ ¸ç´°èƒã§ã§ããŸç”Ÿç‰©ã ã‹ã‚‰...', explanation: 'åŸæ ¸ç”Ÿç‰©ï¼šåŸæ ¸ç´°èƒã‹ã‚‰ãªã‚‹ç”Ÿç‰©ã€‚å¤§è…¸èŒãªã©ã®ç´°èŒé¡ã€‚' },
        { number: 5, question: '1ã¤ã®ç´°èƒã‹ã‚‰ãªã‚Šã€1ã¤ã®ç´°èƒã§ç”Ÿå‘½ã‚’å–¶ã‚“ã§ã„ã‚‹ç”Ÿç‰©ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å˜ç´°èƒç”Ÿç‰©'], hint: 'ã€Œå˜ã€ã¯ã€Œ1ã¤ã€ã¨ã„ã†æ„å‘³', explanation: 'å˜ç´°èƒç”Ÿç‰©ï¼š1ã¤ã®ç´°èƒã ã‘ã§ç”Ÿå‘½æ´»å‹•ã‚’è¡Œã†ç”Ÿç‰©ã€‚ã‚¢ãƒ¡ãƒ¼ãƒã€ã‚¾ã‚¦ãƒªãƒ ã‚·ãªã©ã€‚' },
        { number: 6, question: 'å¤šç´°èƒç”Ÿç‰©ã§ã€ã„ãã¤ã‹ã®ç´°èƒãŒé›†ã¾ã£ã¦ã§ãã‚‹æ§‹é€ ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['çµ„ç¹”'], hint: 'ç´°èƒâ†’ã€‡ã€‡â†’å™¨å®˜ã®é †ç•ª', explanation: 'çµ„ç¹”ï¼šåŒã˜åƒãã‚’ã™ã‚‹ç´°èƒãŒé›†ã¾ã£ãŸã‚‚ã®ã€‚ç­‹çµ„ç¹”ã€ç¥çµŒçµ„ç¹”ãªã©ã€‚' },
        { number: 7, question: 'ã•ã¾ã–ã¾ãªç¨®é¡ã®çµ„ç¹”ãŒé›†ã¾ã£ã¦ã§ãã‚‹æ§‹é€ ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å™¨å®˜'], hint: 'å¿ƒè‡“ã‚„è‚è‡“ãªã©ã®ã“ã¨', explanation: 'å™¨å®˜ï¼šè¤‡æ•°ã®çµ„ç¹”ãŒé›†ã¾ã£ã¦ç‰¹å®šã®æ©Ÿèƒ½ã‚’æœãŸã™ã‚‚ã®ã€‚å¿ƒè‡“ã€è‚è‡“ã€èƒƒãªã©ã€‚' },
        { number: 8, question: 'çœŸæ ¸ç´°èƒã«å«ã¾ã‚Œã€å‘¼å¸ã‚’è¡Œã†ç´°èƒå°å™¨å®˜ã¯ä½•ã‹', type: 'text', correctAnswer: ['ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢'], hint: 'ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½œã‚‹å ´æ‰€ï¼', explanation: 'ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ï¼šç´°èƒã®å‘¼å¸ã‚’è¡Œã„ã€ATPã‚’åˆæˆã™ã‚‹ç´°èƒå°å™¨å®˜ã€‚' },
        { number: 9, question: 'æ¤ç‰©ç´°èƒã«å«ã¾ã‚Œã€å…‰åˆæˆã‚’è¡Œã†ç´°èƒå°å™¨å®˜ã¯ä½•ã‹', type: 'text', correctAnswer: ['è‘‰ç·‘ä½“'], hint: 'ç·‘è‰²ã®è‰²ç´ ã‚’æŒã¤ç´°èƒå°å™¨å®˜', explanation: 'è‘‰ç·‘ä½“ï¼šå…‰åˆæˆã‚’è¡Œã†ç´°èƒå°å™¨å®˜ã€‚ã‚¯ãƒ­ãƒ­ãƒ•ã‚£ãƒ«ã‚’å«ã‚€ã€‚' },
        { number: 10, question: 'çœŸæ ¸ç´°èƒã¨åŸæ ¸ç´°èƒã®æœ€ã‚‚å¤§ããªé•ã„ã¯ä½•ã‹', type: 'choice', choices: ['æ ¸ã®æœ‰ç„¡', 'ç´°èƒå£ã®æœ‰ç„¡', 'å¤§ãã•ã®é•ã„', 'DNAã®æœ‰ç„¡'], correctAnswer: ['æ ¸ã®æœ‰ç„¡'], hint: 'åå‰ã«ç­”ãˆãŒå…¥ã£ã¦ã„ã‚‹ï¼', explanation: 'çœŸæ ¸ç´°èƒã«ã¯æ ¸ãŒã‚ã‚Šã€åŸæ ¸ç´°èƒã«ã¯æ ¸ãŒãªã„ã€‚ã“ã‚ŒãŒæœ€å¤§ã®é•ã„ã€‚' }
      ]
    },
    {
      id: 'bio-q2',
      name: 'å¤§å•2ï¼šé…µç´ ãƒ»å‘¼å¸ãƒ»å…‰åˆæˆ',
      title: 'ã€é…µç´ ãƒ»å‘¼å¸ãƒ»å…‰åˆæˆã€‘é…µç´ ã®ã¯ãŸã‚‰ãã¨å‘¼å¸ãƒ»å…‰åˆæˆã‚’ç¢ºèªã—ã‚ˆã†',
      text: `é…µç´ ã®æ€§è³ªã€å‘¼å¸ã¨å…‰åˆæˆã®åŒ–å­¦å¼ã€ãã‚Œãã‚ŒãŒè¡Œã‚ã‚Œã‚‹å ´æ‰€ã«ã¤ã„ã¦ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚`,
      questions: [
        { number: 1, question: 'é…µç´ ã¯ä¸»ã«ä½•ã‹ã‚‰ã§ãã¦ã„ã‚‹ã‹', type: 'text', correctAnswer: ['ã‚¿ãƒ³ãƒ‘ã‚¯è³ª'], hint: 'ä½“ã‚’ä½œã‚‹æ „é¤Šç´ ã®1ã¤', explanation: 'é…µç´ ï¼šä¸»ã«ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã§ã§ãã¦ã„ã‚‹ã€‚åŒ–å­¦åå¿œã‚’ä¿ƒé€²ã™ã‚‹è§¦åª’ã€‚' },
        { number: 2, question: 'é…µç´ ã«ã¤ã„ã¦æ­£ã—ã„è¨˜è¿°ã‚’é¸ã³ãªã•ã„', type: 'choice', choices: ['ç‰¹å®šã®ç‰©è³ªã®åŒ–å­¦åå¿œã ã‘ã‚’ä¿ƒé€²ã™ã‚‹', 'ã™ã¹ã¦ã®åŒ–å­¦åå¿œã‚’ä¿ƒé€²ã™ã‚‹', 'åå¿œå¾Œã¯åˆ†è§£ã•ã‚Œã‚‹', 'é«˜æ¸©ã§æœ€ã‚‚ã‚ˆãåƒã'], correctAnswer: ['ç‰¹å®šã®ç‰©è³ªã®åŒ–å­¦åå¿œã ã‘ã‚’ä¿ƒé€²ã™ã‚‹'], hint: 'é…µç´ ã«ã¯ã€ŒåŸºè³ªç‰¹ç•°æ€§ã€ãŒã‚ã‚‹', explanation: 'é…µç´ ã¯ç‰¹å®šã®åŸºè³ªã«ã ã‘ä½œç”¨ã™ã‚‹æ€§è³ªï¼ˆåŸºè³ªç‰¹ç•°æ€§ï¼‰ã‚’æŒã¤ã€‚' },
        { number: 3, question: 'åŒ–å­¦åå¿œã‚’ä¿ƒé€²ã—ã€åå¿œãŒçµ‚ã‚ã£ãŸå¾Œã®é…µç´ ã¯ã©ã†ãªã‚‹ã‹', type: 'choice', choices: ['ãã®ã¾ã¾æ®‹ã‚‹', 'åˆ†è§£ã•ã‚Œã‚‹', 'åˆ¥ã®ç‰©è³ªã«å¤‰ã‚ã‚‹', 'åŸºè³ªã¨çµåˆã—ãŸã¾ã¾ã«ãªã‚‹'], correctAnswer: ['ãã®ã¾ã¾æ®‹ã‚‹'], hint: 'é…µç´ ã¯è§¦åª’ãªã®ã§...', explanation: 'é…µç´ ã¯è§¦åª’ãªã®ã§ã€åå¿œå¾Œã‚‚ãã®ã¾ã¾æ®‹ã‚Šã€ä½•åº¦ã‚‚ä½¿ãˆã‚‹ã€‚' },
        { number: 4, question: 'å‘¼å¸ã®åŒ–å­¦å¼ã§ã€æœ‰æ©Ÿç‰©ã¨åå¿œã™ã‚‹ç‰©è³ªã¯ä½•ã‹', type: 'text', correctAnswer: ['é…¸ç´ ', 'O2'], hint: 'ç©ºæ°—ä¸­ã‹ã‚‰å–ã‚Šè¾¼ã‚€æ°—ä½“', explanation: 'å‘¼å¸ï¼šæœ‰æ©Ÿç‰© + é…¸ç´  â†’ äºŒé…¸åŒ–ç‚­ç´  + æ°´ + ã‚¨ãƒãƒ«ã‚®ãƒ¼' },
        { number: 5, question: 'å‘¼å¸ã§ç”Ÿæˆã•ã‚Œã‚‹æ°—ä½“ã¯ä½•ã‹', type: 'text', correctAnswer: ['äºŒé…¸åŒ–ç‚­ç´ ', 'CO2'], hint: 'åãå‡ºã™æ°—ä½“', explanation: 'å‘¼å¸ã®çµæœã€äºŒé…¸åŒ–ç‚­ç´ ã¨æ°´ã€ãã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ï¼ˆATPï¼‰ãŒç”Ÿæˆã•ã‚Œã‚‹ã€‚' },
        { number: 6, question: 'å¤šãã®ç”Ÿç‰©ãŒå‘¼å¸ã§åˆ©ç”¨ã™ã‚‹æœ‰æ©Ÿç‰©ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚°ãƒ«ã‚³ãƒ¼ã‚¹', 'ãƒ–ãƒ‰ã‚¦ç³–'], hint: 'ç³–ã®ä¸€ç¨®ã§ã€æœ€ã‚‚åŸºæœ¬çš„ãªã‚¨ãƒãƒ«ã‚®ãƒ¼æº', explanation: 'ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ï¼ˆãƒ–ãƒ‰ã‚¦ç³–ï¼‰ï¼šå‘¼å¸ã§æœ€ã‚‚ã‚ˆãä½¿ã‚ã‚Œã‚‹æœ‰æ©Ÿç‰©ã€‚C6H12O6ã€‚' },
        { number: 7, question: 'å‘¼å¸ã¯ã©ã®ç´°èƒã§è¡Œã‚ã‚Œã‚‹ã‹', type: 'choice', choices: ['çœŸæ ¸ç´°èƒã ã‘', 'åŸæ ¸ç´°èƒã ã‘', 'çœŸæ ¸ç´°èƒã¨åŸæ ¸ç´°èƒã®ä¸¡æ–¹', 'æ¤ç‰©ç´°èƒã ã‘'], correctAnswer: ['çœŸæ ¸ç´°èƒã¨åŸæ ¸ç´°èƒã®ä¸¡æ–¹'], hint: 'ã™ã¹ã¦ã®ç”Ÿç‰©ãŒã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¿…è¦ã¨ã™ã‚‹', explanation: 'å‘¼å¸ã¯ã™ã¹ã¦ã®ç”Ÿç‰©ã§è¡Œã‚ã‚Œã‚‹ã€‚çœŸæ ¸ç´°èƒã§ã‚‚åŸæ ¸ç´°èƒã§ã‚‚è¡Œã‚ã‚Œã‚‹ã€‚' },
        { number: 8, question: 'å…‰åˆæˆã¯ã©ã“ã§è¡Œã‚ã‚Œã‚‹ã‹', type: 'text', correctAnswer: ['è‘‰ç·‘ä½“'], hint: 'æ¤ç‰©ç´°èƒã«å«ã¾ã‚Œã‚‹ç·‘è‰²ã®ç´°èƒå°å™¨å®˜', explanation: 'å…‰åˆæˆã¯è‘‰ç·‘ä½“ã§è¡Œã‚ã‚Œã‚‹ã€‚å…‰ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½¿ã£ã¦æœ‰æ©Ÿç‰©ã‚’åˆæˆã€‚' },
        { number: 9, question: 'å…‰åˆæˆã®åŒ–å­¦å¼ã§ã€ææ–™ã¨ãªã‚‹ç„¡æ©Ÿç‰©ã¯ä½•ã‹ï¼ˆ2ã¤ï¼‰', type: 'choice', choices: ['äºŒé…¸åŒ–ç‚­ç´ ã¨æ°´', 'é…¸ç´ ã¨æ°´', 'äºŒé…¸åŒ–ç‚­ç´ ã¨é…¸ç´ ', 'ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã¨æ°´'], correctAnswer: ['äºŒé…¸åŒ–ç‚­ç´ ã¨æ°´'], hint: 'å‘¼å¸ã®ç”Ÿæˆç‰©ãŒå…‰åˆæˆã®ææ–™', explanation: 'å…‰åˆæˆï¼šäºŒé…¸åŒ–ç‚­ç´  + æ°´ + å…‰ã‚¨ãƒãƒ«ã‚®ãƒ¼ â†’ æœ‰æ©Ÿç‰© + é…¸ç´ ' },
        { number: 10, question: 'å…‰åˆæˆã¨å‘¼å¸ã®é–¢ä¿‚ã«ã¤ã„ã¦æ­£ã—ã„è¨˜è¿°ã‚’é¸ã³ãªã•ã„', type: 'choice', choices: ['äº’ã„ã«é€†ã®åå¿œã§ã‚ã‚‹', 'åŒã˜åå¿œã§ã‚ã‚‹', 'å…‰åˆæˆã ã‘ãŒç”Ÿç‰©ã«å¿…è¦', 'å‘¼å¸ã¯æ¤ç‰©ã§ã¯è¡Œã‚ã‚Œãªã„'], correctAnswer: ['äº’ã„ã«é€†ã®åå¿œã§ã‚ã‚‹'], hint: 'ä¸€æ–¹ã®ç”Ÿæˆç‰©ãŒä»–æ–¹ã®ææ–™ã«ãªã‚‹', explanation: 'å…‰åˆæˆã¨å‘¼å¸ã¯äº’ã„ã«é€†ã®åŒ–å­¦åå¿œã€‚å…‰åˆæˆã§ä½œã‚‰ã‚ŒãŸæœ‰æ©Ÿç‰©ã‚’å‘¼å¸ã§åˆ†è§£ã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¾—ã‚‹ã€‚' }
      ]
    },
    {
      id: 'bio-q3',
      name: 'å¤§å•3ï¼šDNAãƒ»éºä¼ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯è³ªåˆæˆ',
      title: 'ã€DNAãƒ»éºä¼ãƒ»ã‚¿ãƒ³ãƒ‘ã‚¯è³ªåˆæˆã€‘DNAã®å¡©åŸºå¯¾ã¨ã‚¿ãƒ³ãƒ‘ã‚¯è³ªåˆæˆã®æµã‚Œã‚’ç†è§£ã—ã‚ˆã†',
      text: `DNAã®å¡©åŸºã®ç›¸è£œæ€§ã€DNAã‹ã‚‰ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒåˆæˆã•ã‚Œã‚‹æµã‚Œï¼ˆè»¢å†™ãƒ»ç¿»è¨³ï¼‰ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚`,
      questions: [
        { number: 1, question: 'è¦ªã®å½¢ã‚„æ€§è³ªãŒå­å­«ã«ç¾ã‚Œã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['éºä¼'], hint: 'è¦ªã‹ã‚‰å­ã¸æƒ…å ±ãŒä¼ã‚ã‚‹ã“ã¨', explanation: 'éºä¼ï¼šè¦ªã®ç‰¹å¾´ãŒå­ã«ä¼ã‚ã‚‹ç¾è±¡ã€‚éºä¼æƒ…å ±ã¯DNAã«è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚' },
        { number: 2, question: 'éºä¼ã«ã‚ˆã£ã¦è¦ªã‹ã‚‰å­ã«ä¼ã‚ã‚‹æƒ…å ±ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['éºä¼æƒ…å ±'], hint: 'éºä¼ã€‡ã€‡', explanation: 'éºä¼æƒ…å ±ï¼šè¦ªã‹ã‚‰å­ã¸ä¼ã‚ã‚‹æƒ…å ±ã€‚DNAã®å¡©åŸºé…åˆ—ã¨ã—ã¦è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ã€‚' },
        { number: 3, question: 'éºä¼æƒ…å ±ã‚’æ‹…ã†ã‚‚ã®ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['éºä¼å­'], hint: 'DNAã®ä¸€éƒ¨åˆ†ã§ã€ç‰¹å®šã®ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®æƒ…å ±ã‚’æŒã¤', explanation: 'éºä¼å­ï¼šã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®æƒ…å ±ã‚’æŒã¤DNAã®ä¸€éƒ¨åˆ†ã€‚' },
        { number: 4, question: 'éºä¼æƒ…å ±ã®æœ¬ä½“ã§ã‚ã‚‹ç‰©è³ªã¯ä½•ã‹', type: 'text', correctAnswer: ['DNA', 'ãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœæ ¸é…¸'], hint: 'äºŒé‡ã‚‰ã›ã‚“æ§‹é€ ã‚’æŒã¤', explanation: 'DNAï¼ˆãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœæ ¸é…¸ï¼‰ï¼šéºä¼æƒ…å ±ã‚’æ‹…ã†ç‰©è³ªã€‚äºŒé‡ã‚‰ã›ã‚“æ§‹é€ ã€‚' },
        { number: 5, question: 'ç”Ÿç‰©ãŒç”Ÿãã‚‹ãŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®éºä¼æƒ…å ±ã‚’å«ã‚€DNAã®1çµ„ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ã‚²ãƒãƒ '], hint: 'ã€Œã€‡ã€‡è§£èª­ã€ãªã©ã§èãã“ã¨ãŒã‚ã‚‹', explanation: 'ã‚²ãƒãƒ ï¼šç”Ÿç‰©ãŒæŒã¤ã™ã¹ã¦ã®éºä¼æƒ…å ±ã€‚ãƒ’ãƒˆã‚²ãƒãƒ ãªã©ã€‚' },
        { number: 6, question: 'çœŸæ ¸ç”Ÿç‰©ã®ä½“ç´°èƒã«ã‚ã‚‹ã€å¯¾ã«ãªã£ã¦ã„ã‚‹2ã¤ã®æŸ“è‰²ä½“ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç›¸åŒæŸ“è‰²ä½“'], hint: 'åŒã˜å¤§ãã•ã¨å½¢ã®æŸ“è‰²ä½“ã®ãƒšã‚¢', explanation: 'ç›¸åŒæŸ“è‰²ä½“ï¼šåŒã˜å¤§ãã•ãƒ»å½¢ã®æŸ“è‰²ä½“ã®ãƒšã‚¢ã€‚ä¸€æ–¹ã¯çˆ¶è¦ªã€ã‚‚ã†ä¸€æ–¹ã¯æ¯è¦ªç”±æ¥ã€‚' },
        { number: 7, question: 'ãƒ’ãƒˆã®ç›¸åŒæŸ“è‰²ä½“ã¯ä½•å¯¾ã‚ã‚‹ã‹', type: 'text', correctAnswer: ['23å¯¾', '23', 'ï¼’ï¼“å¯¾', 'ï¼’ï¼“'], hint: 'åˆè¨ˆ46æœ¬', explanation: 'ãƒ’ãƒˆã«ã¯23å¯¾ï¼ˆ46æœ¬ï¼‰ã®æŸ“è‰²ä½“ãŒã‚ã‚‹ã€‚' },
        { number: 8, question: 'DNAã‚’æ§‹æˆã™ã‚‹åŸºæœ¬å˜ä½ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ãƒŒã‚¯ãƒ¬ã‚ªãƒãƒ‰'], hint: 'ç³–ãƒ»ãƒªãƒ³é…¸ãƒ»å¡©åŸºã‹ã‚‰ãªã‚‹', explanation: 'ãƒŒã‚¯ãƒ¬ã‚ªãƒãƒ‰ï¼šDNAã®åŸºæœ¬å˜ä½ã€‚ç³–ï¼ˆãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœãƒ¼ã‚¹ï¼‰ã€ãƒªãƒ³é…¸ã€å¡©åŸºã‹ã‚‰ãªã‚‹ã€‚' },
        { number: 9, question: 'DNAã®å¡©åŸºé…åˆ—ã€ŒATGTGCã€ã«å¯¾å¿œã™ã‚‹ç›¸è£œçš„ãªå¡©åŸºé…åˆ—ã¯ä½•ã‹', type: 'text', correctAnswer: ['TACACG'], hint: 'Aâ†”Tã€Gâ†”Cã®é–¢ä¿‚', explanation: 'DNAã®å¡©åŸºå¯¾ï¼šAï¼ˆã‚¢ãƒ‡ãƒ‹ãƒ³ï¼‰ã¨Tï¼ˆãƒãƒŸãƒ³ï¼‰ã€Gï¼ˆã‚°ã‚¢ãƒ‹ãƒ³ï¼‰ã¨Cï¼ˆã‚·ãƒˆã‚·ãƒ³ï¼‰ãŒå¯¾ã‚’ä½œã‚‹ã€‚' },
        { number: 10, question: 'ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã¯ä½•ãŒå¤šæ•°ã¤ãªãŒã£ã¦ã§ãã¦ã„ã‚‹ã‹', type: 'text', correctAnswer: ['ã‚¢ãƒŸãƒé…¸'], hint: 'ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®ææ–™ã¨ãªã‚‹å°ã•ãªåˆ†å­', explanation: 'ã‚¿ãƒ³ãƒ‘ã‚¯è³ªï¼šã‚¢ãƒŸãƒé…¸ãŒå¤šæ•°ã¤ãªãŒã£ã¦ã§ããŸé«˜åˆ†å­åŒ–åˆç‰©ã€‚' },
        { number: 11, question: 'DNAã®å¡©åŸºé…åˆ—ãŒmRNAã«å†™ã—å–ã‚‰ã‚Œã‚‹éç¨‹ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['è»¢å†™'], hint: 'ã€Œå†™ã€ã¨ã„ã†å­—ãŒå…¥ã£ã¦ã„ã‚‹', explanation: 'è»¢å†™ï¼šDNAã®å¡©åŸºé…åˆ—ã‚’mRNAã«å†™ã—å–ã‚‹éç¨‹ã€‚æ ¸å†…ã§èµ·ã“ã‚‹ã€‚' },
        { number: 12, question: 'mRNAã®å¡©åŸºé…åˆ—ãŒã‚¿ãƒ³ãƒ‘ã‚¯è³ªã®ã‚¢ãƒŸãƒé…¸é…åˆ—ã«å¤‰æ›ã•ã‚Œã‚‹éç¨‹ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç¿»è¨³'], hint: 'è¨€èªã‚’ã€Œç¿»è¨³ã€ã™ã‚‹ã‚ˆã†ã«ã€å¡©åŸºé…åˆ—ã‚’ã‚¢ãƒŸãƒé…¸é…åˆ—ã«å¤‰æ›', explanation: 'ç¿»è¨³ï¼šmRNAã®æƒ…å ±ã‚’ã‚‚ã¨ã«ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã‚’åˆæˆã™ã‚‹éç¨‹ã€‚ãƒªãƒœã‚½ãƒ¼ãƒ ã§èµ·ã“ã‚‹ã€‚' },
        { number: 13, question: 'ç¿»è¨³ã®ã¨ãmRNAã«ã‚ˆã£ã¦æŒ‡å®šã•ã‚ŒãŸã‚¢ãƒŸãƒé…¸ã‚’é‹ã¶RNAã¯ä½•ã‹', type: 'text', correctAnswer: ['tRNA', 'è»¢ç§»RNA', 'é‹æ¬RNA'], hint: 'ã‚¢ãƒŸãƒé…¸ã®é‹ã³å±‹', explanation: 'tRNAï¼ˆè»¢ç§»RNAï¼‰ï¼šã‚¢ãƒŸãƒé…¸ã‚’ãƒªãƒœã‚½ãƒ¼ãƒ ã¾ã§é‹ã¶RNAã€‚' },
        { number: 14, question: 'éºä¼æƒ…å ±ãŒã€ŒDNAâ†’RNAâ†’ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã€ã¨ä¸€æ–¹å‘ã«ä¼ãˆã‚‰ã‚Œã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ‰ã‚°ãƒ'], hint: 'éºä¼æƒ…å ±ã®æµã‚Œã®åŸºæœ¬åŸç†', explanation: 'ã‚»ãƒ³ãƒˆãƒ©ãƒ«ãƒ‰ã‚°ãƒï¼šéºä¼æƒ…å ±ã®æµã‚Œã®åŸºæœ¬åŸç†ã€‚DNAâ†’RNAâ†’ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã€‚' },
        { number: 15, question: 'DNAã®éºä¼æƒ…å ±ã‹ã‚‰ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒåˆæˆã•ã‚Œã‚‹ã“ã¨ã‚’ã€éºä¼å­ã®ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç™ºç¾'], hint: 'éºä¼å­ãŒã€Œç™ºç¾ã€ã™ã‚‹', explanation: 'éºä¼å­ã®ç™ºç¾ï¼šéºä¼å­ã®æƒ…å ±ã«åŸºã¥ã„ã¦ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒä½œã‚‰ã‚Œã‚‹ã“ã¨ã€‚' },
        { number: 16, question: 'RNAã«å«ã¾ã‚Œã‚‹ç³–ã¯ä½•ã‹', type: 'text', correctAnswer: ['ãƒªãƒœãƒ¼ã‚¹'], hint: 'DNAã¯ãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœãƒ¼ã‚¹ã€RNAã¯...', explanation: 'RNAã®ç³–ï¼šãƒªãƒœãƒ¼ã‚¹ã€‚DNAã®ç³–ã¯ãƒ‡ã‚ªã‚­ã‚·ãƒªãƒœãƒ¼ã‚¹ã€‚' },
        { number: 17, question: 'RNAã«å«ã¾ã‚Œã‚‹å¡©åŸºã§ã€DNAã®ãƒãƒŸãƒ³ã®ä»£ã‚ã‚Šã«å«ã¾ã‚Œã‚‹ã‚‚ã®ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚¦ãƒ©ã‚·ãƒ«'], hint: 'DNAã¯Tï¼ˆãƒãƒŸãƒ³ï¼‰ã€RNAã¯Uï¼ˆã€‡ã€‡ã€‡ã€‡ï¼‰', explanation: 'RNAã®å¡©åŸºï¼šã‚¦ãƒ©ã‚·ãƒ«ï¼ˆUï¼‰ãŒãƒãƒŸãƒ³ï¼ˆTï¼‰ã®ä»£ã‚ã‚Šã«å«ã¾ã‚Œã‚‹ã€‚' },
        { number: 18, question: 'DNAã®å¡©åŸºé…åˆ—ã€ŒATGTGCã€ã‚’è»¢å†™ã—ãŸmRNAã®å¡©åŸºé…åˆ—ã¯ä½•ã‹', type: 'text', correctAnswer: ['UACACG'], hint: 'Aâ†’Uã€Tâ†’Aã€Gâ†’Cã€Câ†’Gã«å¤‰æ›', explanation: 'è»¢å†™ã§ã¯ã€Aâ†’Uã€Tâ†’Aã€Gâ†’Cã€Câ†’Gã«å¯¾å¿œã—ã¦mRNAãŒåˆæˆã•ã‚Œã‚‹ã€‚' },
        { number: 19, question: 'DNAã¯ä½•æœ¬é–ã‹', type: 'choice', choices: ['2æœ¬é–', '1æœ¬é–', '3æœ¬é–', '4æœ¬é–'], correctAnswer: ['2æœ¬é–'], hint: 'äºŒé‡ã‚‰ã›ã‚“æ§‹é€ ', explanation: 'DNAã¯2æœ¬é–ã€RNAã¯1æœ¬é–ã€‚' },
        { number: 20, question: 'RNAã¯ä½•æœ¬é–ã‹', type: 'choice', choices: ['1æœ¬é–', '2æœ¬é–', '3æœ¬é–', '4æœ¬é–'], correctAnswer: ['1æœ¬é–'], hint: 'DNAã¨é•ã£ã¦1æœ¬', explanation: 'RNAã¯1æœ¬é–ã€DNAã¯2æœ¬é–ã€‚' }
      ]
    },
    {
      id: 'bio-q4',
      name: 'å¤§å•4ï¼šä½“å†…èª¿ç¯€ï¼ˆç¥çµŒãƒ»ãƒ›ãƒ«ãƒ¢ãƒ³ï¼‰',
      title: 'ã€ä½“å†…èª¿ç¯€ã€‘ãƒ’ãƒˆã®ä½“ã‚’èª¿ç¯€ã™ã‚‹ã—ãã¿ã¨è¡€ç³–æ¿ƒåº¦ã®èª¿ç¯€ã‚’ç†è§£ã—ã‚ˆã†',
      text: `è‡ªå¾‹ç¥çµŒç³»ã€ãƒ›ãƒ«ãƒ¢ãƒ³ã«ã‚ˆã‚‹èª¿ç¯€ã€è¡€ç³–æ¿ƒåº¦ã®èª¿ç¯€ã®ã—ãã¿ã‚’ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚`,
      questions: [
        { number: 1, question: 'äº¤æ„Ÿç¥çµŒã¨å‰¯äº¤æ„Ÿç¥çµŒã‹ã‚‰ãªã‚‹ç¥çµŒç³»ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['è‡ªå¾‹ç¥çµŒç³»', 'è‡ªå¾‹ç¥çµŒ'], hint: 'æ„æ€ã¨ã¯ç„¡é–¢ä¿‚ã«åƒãç¥çµŒç³»', explanation: 'è‡ªå¾‹ç¥çµŒç³»ï¼šäº¤æ„Ÿç¥çµŒã¨å‰¯äº¤æ„Ÿç¥çµŒã‹ã‚‰ãªã‚Šã€å†…è‡“ã®åƒãã‚’èª¿ç¯€ã™ã‚‹ã€‚' },
        { number: 2, question: 'å¿ƒè‡“ã«å¯¾ã—ã¦äº¤æ„Ÿç¥çµŒã¯ã©ã®ã‚ˆã†ã«åƒãã‹', type: 'choice', choices: ['æ‹å‹•ã‚’ä¿ƒé€²ã™ã‚‹', 'æ‹å‹•ã‚’æŠ‘åˆ¶ã™ã‚‹', 'å½±éŸ¿ã‚’ä¸ãˆãªã„', 'æ‹å‹•ã‚’åœæ­¢ã•ã›ã‚‹'], correctAnswer: ['æ‹å‹•ã‚’ä¿ƒé€²ã™ã‚‹'], hint: 'ç·Šå¼µã—ãŸã¨ãã«å¿ƒè‡“ãŒãƒ‰ã‚­ãƒ‰ã‚­ã™ã‚‹ã®ã¯äº¤æ„Ÿç¥çµŒã®ãŸã‚', explanation: 'äº¤æ„Ÿç¥çµŒï¼šå¿ƒæ‹æ•°ã‚’å¢—åŠ ã•ã›ã€è¡€åœ§ã‚’ä¸Šã’ã‚‹ã€‚é—˜äº‰ãƒ»é€ƒèµ°åå¿œã€‚' },
        { number: 3, question: 'å¿ƒè‡“ã«å¯¾ã—ã¦å‰¯äº¤æ„Ÿç¥çµŒã¯ã©ã®ã‚ˆã†ã«åƒãã‹', type: 'choice', choices: ['æ‹å‹•ã‚’æŠ‘åˆ¶ã™ã‚‹', 'æ‹å‹•ã‚’ä¿ƒé€²ã™ã‚‹', 'å½±éŸ¿ã‚’ä¸ãˆãªã„', 'æ‹å‹•ã‚’åœæ­¢ã•ã›ã‚‹'], correctAnswer: ['æ‹å‹•ã‚’æŠ‘åˆ¶ã™ã‚‹'], hint: 'ãƒªãƒ©ãƒƒã‚¯ã‚¹ã—ãŸã¨ãã«å¿ƒè‡“ãŒè½ã¡ç€ãã®ã¯å‰¯äº¤æ„Ÿç¥çµŒã®ãŸã‚', explanation: 'å‰¯äº¤æ„Ÿç¥çµŒï¼šå¿ƒæ‹æ•°ã‚’æ¸›å°‘ã•ã›ã€ãƒªãƒ©ãƒƒã‚¯ã‚¹çŠ¶æ…‹ã«ã™ã‚‹ã€‚' },
        { number: 4, question: 'æƒ…å ±ã‚’å‡¦ç†ã™ã‚‹ä¸­æ¢ã§ã€é‹å‹•ã‚„æ„Ÿè¦šã€è¨€èªã‚„è¨˜æ†¶ãªã©ã«ã‹ã‹ã‚ã‚‹è„³ã®éƒ¨ä½ã¯ä½•ã‹', type: 'text', correctAnswer: ['å¤§è„³'], hint: 'è„³ã®æœ€ã‚‚å¤§ããªéƒ¨åˆ†', explanation: 'å¤§è„³ï¼šæ€è€ƒã€è¨˜æ†¶ã€æ„Ÿè¦šã€é‹å‹•ãªã©ã®é«˜æ¬¡æ©Ÿèƒ½ã‚’æ‹…ã†ã€‚' },
        { number: 5, question: 'é‹å‹•ã‚’èª¿ç¯€ã—ã€ä½“ã®å¹³è¡¡ã‚’ä¿ã¤è„³ã®éƒ¨ä½ã¯ä½•ã‹', type: 'text', correctAnswer: ['å°è„³'], hint: 'ä½“ã®ãƒãƒ©ãƒ³ã‚¹ã‚’ä¿ã¤', explanation: 'å°è„³ï¼šé‹å‹•ã®èª¿ç¯€ã€å¹³è¡¡æ„Ÿè¦šã‚’æ‹…å½“ã€‚' },
        { number: 6, question: 'é–“è„³ã€ä¸­è„³ã€æ©‹ã€å»¶é«„ã‹ã‚‰ãªã‚Šã€å„å™¨å®˜ã®èª¿ç¯€ã«é‡è¦ãªåƒãã‚’ã™ã‚‹è„³ã®éƒ¨ä½ã¯ä½•ã‹', type: 'text', correctAnswer: ['è„³å¹¹'], hint: 'ç”Ÿå‘½ç¶­æŒã«ä¸å¯æ¬ ãªéƒ¨ä½', explanation: 'è„³å¹¹ï¼šå‘¼å¸ã€å¿ƒæ‹ãªã©ã®ç”Ÿå‘½ç¶­æŒæ©Ÿèƒ½ã‚’æ‹…ã†ã€‚' },
        { number: 7, question: 'ãƒ›ãƒ«ãƒ¢ãƒ³ã‚’åˆ†æ³Œã™ã‚‹å™¨å®˜ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å†…åˆ†æ³Œè…º'], hint: 'è¡€æ¶²ä¸­ã«ãƒ›ãƒ«ãƒ¢ãƒ³ã‚’åˆ†æ³Œã™ã‚‹è…º', explanation: 'å†…åˆ†æ³Œè…ºï¼šãƒ›ãƒ«ãƒ¢ãƒ³ã‚’è¡€æ¶²ä¸­ã«åˆ†æ³Œã™ã‚‹å™¨å®˜ã€‚ã™ã„è‡“ã€ç”²çŠ¶è…ºãªã©ã€‚' },
        { number: 8, question: 'ãƒ›ãƒ«ãƒ¢ãƒ³ãŒã¯ãŸã‚‰ãã‹ã‘ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['æ¨™çš„ç´°èƒ'], hint: 'ãƒ›ãƒ«ãƒ¢ãƒ³ã®ã€Œæ¨™çš„ã€ã¨ãªã‚‹ç´°èƒ', explanation: 'æ¨™çš„ç´°èƒï¼šç‰¹å®šã®ãƒ›ãƒ«ãƒ¢ãƒ³ã®å—å®¹ä½“ã‚’æŒã¡ã€ãã®ãƒ›ãƒ«ãƒ¢ãƒ³ã®ä½œç”¨ã‚’å—ã‘ã‚‹ç´°èƒã€‚' },
        { number: 9, question: 'æ¨™çš„ç´°èƒãŒç‰¹å®šã®ãƒ›ãƒ«ãƒ¢ãƒ³ã‚’å—ã‘å–ã‚‹éƒ¨åˆ†ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å—å®¹ä½“'], hint: 'ãƒ›ãƒ«ãƒ¢ãƒ³ã‚’ã€Œå—å®¹ã€ã™ã‚‹éƒ¨åˆ†', explanation: 'å—å®¹ä½“ï¼šãƒ›ãƒ«ãƒ¢ãƒ³ã¨çµåˆã™ã‚‹éƒ¨åˆ†ã€‚éµã¨éµç©´ã®é–¢ä¿‚ã€‚' },
        { number: 10, question: 'å‰¯è…é«„è³ªã‹ã‚‰åˆ†æ³Œã•ã‚Œã€è¡€ç³–æ¿ƒåº¦ã‚„å¿ƒæ‹æ•°ã®èª¿ç¯€ã«ã‹ã‹ã‚ã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³'], hint: 'ç·Šå¼µã—ãŸã¨ãã«åˆ†æ³Œã•ã‚Œã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³', explanation: 'ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ï¼šè¡€ç³–å€¤ã‚’ä¸Šã’ã€å¿ƒæ‹æ•°ã‚’å¢—ã‚„ã™ã€‚ã‚¹ãƒˆãƒ¬ã‚¹ãƒ›ãƒ«ãƒ¢ãƒ³ã€‚' },
        { number: 11, question: 'ç”²çŠ¶è…ºã‹ã‚‰åˆ†æ³Œã•ã‚Œã€å…¨èº«ã®ä»£è¬ã‚’é«˜ã‚ã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ãƒãƒ­ã‚­ã‚·ãƒ³'], hint: 'ç”²çŠ¶è…ºãƒ›ãƒ«ãƒ¢ãƒ³', explanation: 'ãƒãƒ­ã‚­ã‚·ãƒ³ï¼šä»£è¬ã‚’ä¿ƒé€²ã™ã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã€‚ç”²çŠ¶è…ºã‹ã‚‰åˆ†æ³Œã€‚' },
        { number: 12, question: 'æœ€çµ‚ã®åˆ†æ³Œç‰©ã‚„ãã®åŠ¹æœãŒã€ä¸€é€£ã®åå¿œç³»ã®å‰ã®æ®µéšã«æˆ»ã£ã¦å½±éŸ¿ã‚’åŠã¼ã™ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯'], hint: 'ã€Œè² ã®ã€‡ã€‡ã€‡ã€‡ã€‡ã€‡ã€‡ã€ã¨ã„ã†èª¿ç¯€æ©Ÿæ§‹', explanation: 'ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼šãƒ›ãƒ«ãƒ¢ãƒ³æ¿ƒåº¦ãŒé©æ­£ã«ä¿ãŸã‚Œã‚‹ã—ãã¿ã€‚è² ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒä¸€èˆ¬çš„ã€‚' },
        { number: 13, question: 'ãƒ›ãƒ«ãƒ¢ãƒ³åˆ†æ³Œã‚’èª¿ç¯€ã™ã‚‹è„³ã®éƒ¨ä½ã¯ä½•ã‹ï¼ˆ2ã¤ã®ã†ã¡1ã¤ï¼‰', type: 'choice', choices: ['è¦–åºŠä¸‹éƒ¨', 'å¤§è„³', 'å°è„³', 'å»¶é«„'], correctAnswer: ['è¦–åºŠä¸‹éƒ¨'], hint: 'é–“è„³ã®ä¸€éƒ¨', explanation: 'è¦–åºŠä¸‹éƒ¨ï¼šãƒ›ãƒ«ãƒ¢ãƒ³åˆ†æ³Œã®ä¸­æ¢ã€‚è„³ä¸‹å‚ä½“ã¨é€£æºã—ã¦èª¿ç¯€ã€‚' },
        { number: 14, question: 'è¡€ç³–æ¿ƒåº¦ãŒä½ä¸‹ã—ãŸã¨ãã«ã€ã™ã„è‡“ã®ãƒ©ãƒ³ã‚²ãƒ«ãƒãƒ³ã‚¹å³¶Aç´°èƒã‹ã‚‰åˆ†æ³Œã•ã‚Œã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚°ãƒ«ã‚«ã‚´ãƒ³'], hint: 'è¡€ç³–å€¤ã‚’ä¸Šã’ã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³', explanation: 'ã‚°ãƒ«ã‚«ã‚´ãƒ³ï¼šè‚è‡“ã§ã‚°ãƒªã‚³ãƒ¼ã‚²ãƒ³ã‚’åˆ†è§£ã—ã€è¡€ç³–å€¤ã‚’ä¸Šã’ã‚‹ã€‚' },
        { number: 15, question: 'è¡€ç³–æ¿ƒåº¦ãŒä¸Šæ˜‡ã—ãŸã¨ãã«ã€ã™ã„è‡“ã®ãƒ©ãƒ³ã‚²ãƒ«ãƒãƒ³ã‚¹å³¶Bç´°èƒã‹ã‚‰åˆ†æ³Œã•ã‚Œã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚¤ãƒ³ã‚¹ãƒªãƒ³'], hint: 'è¡€ç³–å€¤ã‚’ä¸‹ã’ã‚‹å”¯ä¸€ã®ãƒ›ãƒ«ãƒ¢ãƒ³', explanation: 'ã‚¤ãƒ³ã‚¹ãƒªãƒ³ï¼šç´°èƒã®ç³–å–ã‚Šè¾¼ã¿ã‚’ä¿ƒé€²ã—ã€è¡€ç³–å€¤ã‚’ä¸‹ã’ã‚‹ã€‚' },
        { number: 16, question: 'è¡€ç³–æ¿ƒåº¦ã‚’ä¸‹ã’ã‚‹ã—ãã¿ãŒã¯ãŸã‚‰ã‹ãšã€è¡€ç³–æ¿ƒåº¦ãŒé«˜ã„çŠ¶æ…‹ãŒç¶šãç—…æ°—ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç³–å°¿ç—…'], hint: 'ã‚¤ãƒ³ã‚¹ãƒªãƒ³ãŒä¸è¶³ã™ã‚‹ç—…æ°—', explanation: 'ç³–å°¿ç—…ï¼šã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®ä¸è¶³ã‚„ä½œç”¨ä½ä¸‹ã«ã‚ˆã‚Šã€é«˜è¡€ç³–ãŒç¶šãç—…æ°—ã€‚' },
        { number: 17, question: 'è¡€ç³–æ¿ƒåº¦ãŒä½ä¸‹ã—ãŸã¨ãã«å‰¯è…é«„è³ªã‹ã‚‰åˆ†æ³Œã•ã‚Œã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³'], hint: 'ã‚¹ãƒˆãƒ¬ã‚¹ãƒ›ãƒ«ãƒ¢ãƒ³ã¨ã—ã¦ã‚‚çŸ¥ã‚‰ã‚Œã‚‹', explanation: 'ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³ï¼šè¡€ç³–å€¤ã‚’ä¸Šã’ã‚‹ä½œç”¨ã‚‚ã‚ã‚‹ã€‚ç·Šæ€¥æ™‚ã«åˆ†æ³Œã€‚' },
        { number: 18, question: 'è¡€ç³–æ¿ƒåº¦ãŒä½ä¸‹ã—ãŸã¨ãã«å‰¯è…çš®è³ªã‹ã‚‰åˆ†æ³Œã•ã‚Œã‚‹ãƒ›ãƒ«ãƒ¢ãƒ³ã¯ä½•ã‹', type: 'text', correctAnswer: ['ç³–è³ªã‚³ãƒ«ãƒã‚³ã‚¤ãƒ‰'], hint: 'å‰¯è…çš®è³ªãƒ›ãƒ«ãƒ¢ãƒ³ã®ä¸€ç¨®', explanation: 'ç³–è³ªã‚³ãƒ«ãƒã‚³ã‚¤ãƒ‰ï¼šè‚è‡“ã§ã®ç³–ã®ç”Ÿæˆã‚’ä¿ƒé€²ã—ã€è¡€ç³–å€¤ã‚’ä¸Šã’ã‚‹ã€‚' },
        { number: 19, question: 'è¡€ç³–æ¿ƒåº¦ãŒä½ä¸‹ã—ãŸã¨ãã«å¼·ã¾ã‚‹ç¥çµŒç³»ã¯ã©ã¡ã‚‰ã‹', type: 'choice', choices: ['äº¤æ„Ÿç¥çµŒ', 'å‰¯äº¤æ„Ÿç¥çµŒ', 'é‹å‹•ç¥çµŒ', 'æ„Ÿè¦šç¥çµŒ'], correctAnswer: ['äº¤æ„Ÿç¥çµŒ'], hint: 'ç·Šæ€¥æ™‚ã«åƒãç¥çµŒ', explanation: 'äº¤æ„Ÿç¥çµŒï¼šè¡€ç³–å€¤ä½ä¸‹æ™‚ã«æ´»ç™ºã«ãªã‚Šã€ã‚°ãƒ«ã‚«ã‚´ãƒ³ã‚„ã‚¢ãƒ‰ãƒ¬ãƒŠãƒªãƒ³åˆ†æ³Œã‚’ä¿ƒã™ã€‚' },
        { number: 20, question: 'ã‚¤ãƒ³ã‚¹ãƒªãƒ³ãŒä½œç”¨ã™ã‚‹ä¸»ãªæ¨™çš„ç´°èƒã¯ã©ã“ã‹', type: 'choice', choices: ['å…¨èº«ã®ç´°èƒ', 'è‚è‡“ã ã‘', 'ç­‹è‚‰ã ã‘', 'è„³ã ã‘'], correctAnswer: ['å…¨èº«ã®ç´°èƒ'], hint: 'ã»ã¨ã‚“ã©ã®ç´°èƒãŒã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®å½±éŸ¿ã‚’å—ã‘ã‚‹', explanation: 'ã‚¤ãƒ³ã‚¹ãƒªãƒ³ï¼šå…¨èº«ã®ã»ã¨ã‚“ã©ã®ç´°èƒã«ä½œç”¨ã—ã¦ã€ã‚°ãƒ«ã‚³ãƒ¼ã‚¹ã®å–ã‚Šè¾¼ã¿ã‚’ä¿ƒé€²ã™ã‚‹ã€‚' }
      ]
    },
    {
      id: 'bio-q5',
      name: 'å¤§å•5ï¼šå…ç–«',
      title: 'ã€å…ç–«ã€‘å…ç–«ã®ã—ãã¿ã‚„ã•ã¾ã–ã¾ãªç–¾æ‚£ã«ã¤ã„ã¦ç¢ºèªã—ã‚ˆã†',
      text: `è‡ªç„¶å…ç–«ã¨ç²å¾—å…ç–«ã€å…ç–«ã«é–¢ã‚ã‚‹ç´°èƒã€æŠ—åŸã¨æŠ—ä½“ã€å…ç–«ã«é–¢ã™ã‚‹ç–¾æ‚£ã«ã¤ã„ã¦ç†è§£ã—ã¾ã—ã‚‡ã†ã€‚`,
      questions: [
        { number: 1, question: 'ä½“å†…ã«ä¾µå…¥ã—ãŸç•°ç‰©ã‚’æ’é™¤ã™ã‚‹ã—ãã¿ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å…ç–«'], hint: 'ç—…åŸä½“ã‹ã‚‰ä½“ã‚’å®ˆã‚‹ã—ãã¿', explanation: 'å…ç–«ï¼šç—…åŸä½“ãªã©ã®ç•°ç‰©ã‚’èªè­˜ã—ã€æ’é™¤ã™ã‚‹ç”Ÿä½“é˜²å¾¡æ©Ÿæ§‹ã€‚' },
        { number: 2, question: 'å…ç–«åå¿œã‚’å¼•ãèµ·ã“ã™ç‰©è³ªã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['æŠ—åŸ'], hint: 'æŠ—ä½“ãŒã§ãã‚‹åŸå› ã¨ãªã‚‹ç‰©è³ª', explanation: 'æŠ—åŸï¼šå…ç–«åå¿œã‚’å¼•ãèµ·ã“ã™ç‰©è³ªã€‚ç—…åŸä½“ã®è¡¨é¢ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãªã©ã€‚' },
        { number: 3, question: 'æŠ—åŸã«ç‰¹ç•°çš„ã«çµåˆã™ã‚‹ã‚¿ãƒ³ãƒ‘ã‚¯è³ªã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['æŠ—ä½“'], hint: 'æŠ—åŸã«å¯¾æŠ—ã™ã‚‹ç‰©è³ª', explanation: 'æŠ—ä½“ï¼šç‰¹å®šã®æŠ—åŸã«çµåˆã™ã‚‹ã‚¿ãƒ³ãƒ‘ã‚¯è³ªï¼ˆå…ç–«ã‚°ãƒ­ãƒ–ãƒªãƒ³ï¼‰ã€‚' },
        { number: 4, question: 'ç”Ÿã¾ã‚Œã¤ãå‚™ã‚ã£ã¦ã„ã‚‹å…ç–«ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['è‡ªç„¶å…ç–«'], hint: 'ç”Ÿã¾ã‚Œã¤ãæŒã£ã¦ã„ã‚‹é˜²å¾¡æ©Ÿæ§‹', explanation: 'è‡ªç„¶å…ç–«ï¼šç”Ÿã¾ã‚Œã¤ãå‚™ã‚ã£ã¦ã„ã‚‹éç‰¹ç•°çš„ãªå…ç–«ã€‚ã™ã¹ã¦ã®ç•°ç‰©ã«åå¿œã€‚' },
        { number: 5, question: 'ç—…åŸä½“ã«æ„ŸæŸ“ã—ãŸå¾Œã«ç²å¾—ã•ã‚Œã‚‹å…ç–«ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç²å¾—å…ç–«', 'é©å¿œå…ç–«'], hint: 'å¾Œå¤©çš„ã«ç²å¾—ã™ã‚‹å…ç–«', explanation: 'ç²å¾—å…ç–«ï¼šç‰¹å®šã®ç—…åŸä½“ã«å¯¾ã—ã¦å¾Œå¤©çš„ã«ç²å¾—ã•ã‚Œã‚‹ç‰¹ç•°çš„ãªå…ç–«ã€‚' },
        { number: 6, question: 'è‡ªç„¶å…ç–«ã§ã€ç•°ç‰©ã‚’é£Ÿã¹ã¦åˆ†è§£ã™ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['é£Ÿç´°èƒ', 'ãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸', 'å¥½ä¸­çƒ'], hint: 'ç•°ç‰©ã‚’ã€Œé£Ÿã¹ã‚‹ã€ç´°èƒ', explanation: 'é£Ÿç´°èƒï¼šå¥½ä¸­çƒã‚„ãƒã‚¯ãƒ­ãƒ•ã‚¡ãƒ¼ã‚¸ãªã©ã€ç•°ç‰©ã‚’è²ªé£Ÿã™ã‚‹ç´°èƒã€‚' },
        { number: 7, question: 'ç²å¾—å…ç–«ã§ã€æŠ—ä½“ã‚’ç”£ç”Ÿã™ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['Bç´°èƒ', 'Bãƒªãƒ³ãƒ‘çƒ'], hint: 'ãƒªãƒ³ãƒ‘çƒã®ä¸€ç¨®ã§ã€ã€ŒBã€ã§å§‹ã¾ã‚‹', explanation: 'Bç´°èƒï¼šæŠ—ä½“ã‚’ç”£ç”Ÿã™ã‚‹ãƒªãƒ³ãƒ‘çƒã€‚æŠ—åŸåˆºæ¿€ã§å½¢è³ªç´°èƒã«åˆ†åŒ–ã€‚' },
        { number: 8, question: 'ç²å¾—å…ç–«ã§ã€æ„ŸæŸ“ç´°èƒã‚’ç ´å£Šã™ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['Tç´°èƒ', 'Tãƒªãƒ³ãƒ‘çƒ', 'ã‚­ãƒ©ãƒ¼Tç´°èƒ'], hint: 'ãƒªãƒ³ãƒ‘çƒã®ä¸€ç¨®ã§ã€ã€ŒTã€ã§å§‹ã¾ã‚‹', explanation: 'Tç´°èƒï¼šç´°èƒæ€§å…ç–«ã‚’æ‹…å½“ã€‚ã‚­ãƒ©ãƒ¼Tç´°èƒã¯æ„ŸæŸ“ç´°èƒã‚’ç ´å£Šã€‚' },
        { number: 9, question: 'ä¸€åº¦æ„ŸæŸ“ã—ãŸç—…åŸä½“ã«å¯¾ã—ã¦ã€2å›ç›®ä»¥é™ã®æ„ŸæŸ“ã§é€Ÿã‚„ã‹ã«å…ç–«åå¿œãŒèµ·ã“ã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å…ç–«è¨˜æ†¶', 'äºŒæ¬¡å¿œç­”'], hint: 'ã€Œè¨˜æ†¶ã€ãŒã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰', explanation: 'å…ç–«è¨˜æ†¶ï¼šè¨˜æ†¶ç´°èƒã«ã‚ˆã‚Šã€åŒã˜æŠ—åŸã«å¯¾ã—ã¦è¿…é€Ÿã«åå¿œã§ãã‚‹ã€‚' },
        { number: 10, question: 'ç—…åŸä½“ã‚’å¼±æ¯’åŒ–ã¾ãŸã¯ç„¡æ¯’åŒ–ã—ãŸã‚‚ã®ã‚’æ¥ç¨®ã—ã€å…ç–«ã‚’ç²å¾—ã•ã›ã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ãƒ¯ã‚¯ãƒãƒ³æ¥ç¨®', 'äºˆé˜²æ¥ç¨®'], hint: 'ç—…æ°—ã‚’äºˆé˜²ã™ã‚‹ãŸã‚ã«æ³¨å°„ã™ã‚‹ã‚‚ã®', explanation: 'ãƒ¯ã‚¯ãƒãƒ³ï¼šç—…åŸä½“ã‚’å¼±æ¯’åŒ–ã—ã€å…ç–«è¨˜æ†¶ã‚’ä½œã‚‰ã›ã‚‹ã€‚èƒ½å‹•å…ç–«ã®ä¸€ç¨®ã€‚' },
        { number: 11, question: 'è‡ªå·±ã®ç´°èƒã‚„çµ„ç¹”ã‚’ç•°ç‰©ã¨ã—ã¦æ”»æ’ƒã—ã¦ã—ã¾ã†ç–¾æ‚£ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['è‡ªå·±å…ç–«ç–¾æ‚£'], hint: 'å…ç–«ãŒè‡ªåˆ†è‡ªèº«ã‚’æ”»æ’ƒã—ã¦ã—ã¾ã†', explanation: 'è‡ªå·±å…ç–«ç–¾æ‚£ï¼šå…ç–«ç³»ãŒè‡ªå·±ã‚’æ”»æ’ƒã€‚é–¢ç¯€ãƒªã‚¦ãƒãƒã€1å‹ç³–å°¿ç—…ãªã©ã€‚' },
        { number: 12, question: 'æœ¬æ¥ç„¡å®³ãªç‰©è³ªã«å¯¾ã—ã¦å…ç–«ãŒéå‰°ã«åå¿œã™ã‚‹ã“ã¨ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼'], hint: 'èŠ±ç²‰ç—‡ãªã©ãŒä»£è¡¨ä¾‹', explanation: 'ã‚¢ãƒ¬ãƒ«ã‚®ãƒ¼ï¼šç„¡å®³ãªæŠ—åŸï¼ˆã‚¢ãƒ¬ãƒ«ã‚²ãƒ³ï¼‰ã«å¯¾ã™ã‚‹éå‰°ãªå…ç–«åå¿œã€‚' },
        { number: 13, question: 'ã‚¨ã‚¤ã‚ºã®åŸå› ã¨ãªã‚‹ã‚¦ã‚¤ãƒ«ã‚¹ã¯ä½•ã‹', type: 'text', correctAnswer: ['HIV', 'ãƒ’ãƒˆå…ç–«ä¸å…¨ã‚¦ã‚¤ãƒ«ã‚¹'], hint: 'å…ç–«ç´°èƒã‚’ç ´å£Šã™ã‚‹ã‚¦ã‚¤ãƒ«ã‚¹', explanation: 'HIVï¼šãƒ˜ãƒ«ãƒ‘ãƒ¼Tç´°èƒã‚’ç ´å£Šã—ã€å…ç–«ä¸å…¨ã‚’å¼•ãèµ·ã“ã™ã‚¦ã‚¤ãƒ«ã‚¹ã€‚' },
        { number: 14, question: 'HIVãŒä¸»ã«æ”»æ’ƒã™ã‚‹å…ç–«ç´°èƒã¯ä½•ã‹', type: 'text', correctAnswer: ['ãƒ˜ãƒ«ãƒ‘ãƒ¼Tç´°èƒ', 'ãƒ˜ãƒ«ãƒ‘ãƒ¼Tãƒªãƒ³ãƒ‘çƒ'], hint: 'å…ç–«åå¿œã‚’èª¿ç¯€ã™ã‚‹Tç´°èƒ', explanation: 'ãƒ˜ãƒ«ãƒ‘ãƒ¼Tç´°èƒï¼šå…ç–«åå¿œã‚’èª¿ç¯€ã€‚HIVã«æ„ŸæŸ“ã™ã‚‹ã¨ç ´å£Šã•ã‚Œã‚‹ã€‚' },
        { number: 15, question: 'æŠ—ä½“ã«ã‚ˆã‚‹å…ç–«ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ä½“æ¶²æ€§å…ç–«'], hint: 'Bç´°èƒãŒé–¢ã‚ã‚‹å…ç–«', explanation: 'ä½“æ¶²æ€§å…ç–«ï¼šBç´°èƒãŒç”£ç”Ÿã™ã‚‹æŠ—ä½“ã«ã‚ˆã‚‹å…ç–«ã€‚è¡€æ¶²ã‚„ãƒªãƒ³ãƒ‘æ¶²ä¸­ã§ä½œç”¨ã€‚' },
        { number: 16, question: 'Tç´°èƒã«ã‚ˆã‚‹å…ç–«ã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['ç´°èƒæ€§å…ç–«'], hint: 'Tç´°èƒãŒç›´æ¥æ”»æ’ƒã™ã‚‹å…ç–«', explanation: 'ç´°èƒæ€§å…ç–«ï¼šTç´°èƒãŒæ„ŸæŸ“ç´°èƒã‚’ç›´æ¥ç ´å£Šã™ã‚‹å…ç–«ã€‚' },
        { number: 17, question: 'è¡€æ¶²ä¸­ã®ç™½è¡€çƒã®ã†ã¡ã€å…ç–«ã«é–¢ã‚ã‚‹ä¸»ãªç´°èƒã¯ä½•ã‹', type: 'text', correctAnswer: ['ãƒªãƒ³ãƒ‘çƒ'], hint: 'Tç´°èƒã‚„Bç´°èƒã®ç·ç§°', explanation: 'ãƒªãƒ³ãƒ‘çƒï¼šç™½è¡€çƒã®ä¸€ç¨®ã€‚Tç´°èƒã€Bç´°èƒã€NKç´°èƒãªã©ã‚’å«ã‚€ã€‚' },
        { number: 18, question: 'æŠ—ä½“ã‚’å¤§é‡ã«ç”£ç”Ÿã™ã‚‹ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['å½¢è³ªç´°èƒ'], hint: 'Bç´°èƒãŒåˆ†åŒ–ã—ã¦ã§ãã‚‹ç´°èƒ', explanation: 'å½¢è³ªç´°èƒï¼šBç´°èƒãŒæŠ—åŸåˆºæ¿€ã§åˆ†åŒ–ã—ãŸç´°èƒã€‚å¤§é‡ã®æŠ—ä½“ã‚’ç”£ç”Ÿã€‚' },
        { number: 19, question: 'å…ç–«è¨˜æ†¶ã‚’æ‹…ã†ç´°èƒã‚’ä½•ã¨ã„ã†ã‹', type: 'text', correctAnswer: ['è¨˜æ†¶ç´°èƒ'], hint: 'ä¸€åº¦ä¼šã£ãŸæŠ—åŸã‚’è¦šãˆã¦ã„ã‚‹ç´°èƒ', explanation: 'è¨˜æ†¶ç´°èƒï¼šåˆå›æ„ŸæŸ“æ™‚ã«ä½œã‚‰ã‚Œã€åŒã˜æŠ—åŸã«è¿…é€Ÿã«åå¿œã™ã‚‹ã€‚' },
        { number: 20, question: 'æ‹’çµ¶åå¿œã‚’èµ·ã“ã•ãªã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€è‡“å™¨ç§»æ¤ã®éš›ã«ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚‹çµ„ç¹”ã®é©åˆæ€§ã‚’ä½•ã¨ã„ã†ã‹', type: 'choice', choices: ['HLAå‹', 'ABOå‹', 'Rhå‹', 'MNå‹'], correctAnswer: ['HLAå‹'], hint: 'çµ„ç¹”é©åˆæ€§æŠ—åŸ', explanation: 'HLAå‹ï¼šãƒ’ãƒˆç™½è¡€çƒæŠ—åŸã€‚ç§»æ¤æ™‚ã®é©åˆæ€§ã‚’æ±ºã‚ã‚‹é‡è¦ãªå› å­ã€‚' }
      ]
    },
    {
      id: 'bio-q6',
      name: 'å¤§å•6ï¼šè«–è¿°å•é¡Œ',
      title: 'ã€è«–è¿°å•é¡Œã€‘ç”Ÿç‰©åŸºç¤ã®ç·åˆå•é¡Œï¼ˆ50å­—ä»¥ä¸Šï¼‰',
      text: `ã“ã‚Œã¾ã§å­¦ç¿’ã—ãŸå†…å®¹ã‚’è¸ã¾ãˆã¦ã€50å­—ä»¥ä¸Šã§è«–è¿°ã™ã‚‹å•é¡Œã§ã™ã€‚`,
      questions: [
        { 
          number: 1, 
          question: 'ã‚ãªãŸãŒã€Œç”Ÿç‰©åŸºç¤ã€ã®å­¦ç¿’ã§å°è±¡ã«æ®‹ã£ãŸã“ã¨ã€ç†è§£ãŒæ·±ã¾ã£ãŸã“ã¨ã€ä»Šå¾Œã®å­¦ç¿’ã«å½¹ç«‹ã¦ãŸã„ã“ã¨ãªã©ã‚’50å­—ä»¥ä¸Šã§æ›¸ã„ã¦ãã ã•ã„ã€‚', 
          type: 'text', 
          correctAnswer: ['è‡ªç”±è¨˜è¿°'], 
          hint: 'ç´°èƒã€é…µç´ ã€DNAã€ä½“å†…èª¿ç¯€ã€å…ç–«ãªã©ã€ã©ã®åˆ†é‡ã§ã‚‚æ§‹ã„ã¾ã›ã‚“ã€‚å…·ä½“çš„ã«æ›¸ãã¾ã—ã‚‡ã†ã€‚', 
          explanation: 'ã“ã®å•é¡Œã¯è‡ªç”±è¨˜è¿°ã§ã™ã€‚å­¦ç¿’ã—ãŸå†…å®¹ã‚’æŒ¯ã‚Šè¿”ã‚Šã€è‡ªåˆ†ã®è¨€è‘‰ã§ã¾ã¨ã‚ã‚‹ã“ã¨ãŒå¤§åˆ‡ã§ã™ã€‚ä¾‹ï¼šã€Œç´°èƒã®æ§‹é€ ã«ã¤ã„ã¦å­¦ã³ã€ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ãŒå‘¼å¸ã«ã‚ˆã£ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’ä½œã‚Šå‡ºã™ã“ã¨ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚ã¾ãŸã€DNAã‹ã‚‰éºä¼æƒ…å ±ãŒè»¢å†™ãƒ»ç¿»è¨³ã•ã‚Œã¦ã‚¿ãƒ³ãƒ‘ã‚¯è³ªãŒåˆæˆã•ã‚Œã‚‹æµã‚Œã‚’ç†è§£ã§ãã¾ã—ãŸã€‚ä»Šå¾Œã¯å…ç–«ã®ã—ãã¿ã‚’ã•ã‚‰ã«æ·±ãå­¦ã³ãŸã„ã§ã™ã€‚ã€ï¼ˆ100å­—ï¼‰' 
        },
        { 
          number: 2, 
          question: 'å‘¼å¸ã¨å…‰åˆæˆã®é–¢ä¿‚ã«ã¤ã„ã¦ã€åŒ–å­¦å¼ã‚’å«ã‚ã¦50å­—ä»¥ä¸Šã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚', 
          type: 'text', 
          correctAnswer: ['è‡ªç”±è¨˜è¿°'], 
          hint: 'äº’ã„ã«é€†ã®åå¿œã§ã‚ã‚‹ã“ã¨ã€ææ–™ã¨ç”Ÿæˆç‰©ã®é–¢ä¿‚ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚', 
          explanation: 'ä¾‹ï¼šã€Œå‘¼å¸ã¯æœ‰æ©Ÿç‰©ã¨é…¸ç´ ã‹ã‚‰äºŒé…¸åŒ–ç‚­ç´ ã¨æ°´ã‚’ç”Ÿæˆã—ã¦ã‚¨ãƒãƒ«ã‚®ãƒ¼ã‚’å¾—ã‚‹åå¿œã§ã‚ã‚‹ã€‚ä¸€æ–¹ã€å…‰åˆæˆã¯äºŒé…¸åŒ–ç‚­ç´ ã¨æ°´ã‹ã‚‰æœ‰æ©Ÿç‰©ã¨é…¸ç´ ã‚’åˆæˆã™ã‚‹åå¿œã§ã€å‘¼å¸ã¨ã¯é€†ã®åå¿œã§ã‚ã‚‹ã€‚ã“ã®2ã¤ã®åå¿œã«ã‚ˆã‚Šã€ç”Ÿç‰©ã¨ç’°å¢ƒã®é–“ã§ç‰©è³ªãŒå¾ªç’°ã—ã¦ã„ã‚‹ã€‚ã€ï¼ˆ110å­—ï¼‰' 
        },
        { 
          number: 3, 
          question: 'DNAã®å¡©åŸºã®ç›¸è£œæ€§ã¨ã¯ä½•ã‹ã€50å­—ä»¥ä¸Šã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚', 
          type: 'text', 
          correctAnswer: ['è‡ªç”±è¨˜è¿°'], 
          hint: 'A-Tã€G-Cã®å¡©åŸºå¯¾ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚', 
          explanation: 'ä¾‹ï¼šã€ŒDNAã®å¡©åŸºã®ç›¸è£œæ€§ã¨ã¯ã€ã‚¢ãƒ‡ãƒ‹ãƒ³(A)ã¨ãƒãƒŸãƒ³(T)ã€ã‚°ã‚¢ãƒ‹ãƒ³(G)ã¨ã‚·ãƒˆã‚·ãƒ³(C)ãŒãã‚Œãã‚Œå¯¾ã‚’ä½œã‚‹æ€§è³ªã®ã“ã¨ã§ã‚ã‚‹ã€‚ã“ã®æ€§è³ªã«ã‚ˆã‚Šã€ä¸€æ–¹ã®é–ã®å¡©åŸºé…åˆ—ãŒæ±ºã¾ã‚Œã°ã€ã‚‚ã†ä¸€æ–¹ã®é–ã®å¡©åŸºé…åˆ—ã‚‚è‡ªå‹•çš„ã«æ±ºã¾ã‚‹ã€‚ã“ã‚Œã¯DNAã®è¤‡è£½ã‚„éºä¼æƒ…å ±ã®æ­£ç¢ºãªä¼é”ã«é‡è¦ã§ã‚ã‚‹ã€‚ã€ï¼ˆ130å­—ï¼‰' 
        },
        { 
          number: 4, 
          question: 'è¡€ç³–æ¿ƒåº¦ãŒä¸Šæ˜‡ã—ãŸã¨ãã®èª¿ç¯€ã®ã—ãã¿ã‚’ã€ãƒ›ãƒ«ãƒ¢ãƒ³åã‚’å«ã‚ã¦50å­—ä»¥ä¸Šã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚', 
          type: 'text', 
          correctAnswer: ['è‡ªç”±è¨˜è¿°'], 
          hint: 'ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã®åƒãã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ã‚‡ã†ã€‚', 
          explanation: 'ä¾‹ï¼šã€Œè¡€ç³–æ¿ƒåº¦ãŒä¸Šæ˜‡ã™ã‚‹ã¨ã€ã™ã„è‡“ã®ãƒ©ãƒ³ã‚²ãƒ«ãƒãƒ³ã‚¹å³¶Bç´°èƒã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒªãƒ³ãŒåˆ†æ³Œã•ã‚Œã‚‹ã€‚ã‚¤ãƒ³ã‚¹ãƒªãƒ³ã¯å…¨èº«ã®ç´°èƒã«åƒãã‹ã‘ã¦ç³–ã®å–ã‚Šè¾¼ã¿ã‚’ä¿ƒé€²ã—ã€ã¾ãŸè‚è‡“ã§ã‚°ãƒªã‚³ãƒ¼ã‚²ãƒ³ã®åˆæˆã‚’ä¿ƒé€²ã™ã‚‹ã€‚ã“ã‚Œã«ã‚ˆã‚Šè¡€ç³–æ¿ƒåº¦ãŒæ­£å¸¸ç¯„å›²ã«ä¸‹ãŒã‚‹ã€‚ã€ï¼ˆ105å­—ï¼‰' 
        },
        { 
          number: 5, 
          question: 'ç²å¾—å…ç–«ã«ãŠã‘ã‚‹ä¸€æ¬¡å¿œç­”ã¨äºŒæ¬¡å¿œç­”ã®é•ã„ã‚’50å­—ä»¥ä¸Šã§èª¬æ˜ã—ã¦ãã ã•ã„ã€‚', 
          type: 'text', 
          correctAnswer: ['è‡ªç”±è¨˜è¿°'], 
          hint: 'è¨˜æ†¶ç´°èƒã®å½¹å‰²ã«ã¤ã„ã¦è§¦ã‚Œã¾ã—ã‚‡ã†ã€‚', 
          explanation: 'ä¾‹ï¼šã€Œä¸€æ¬¡å¿œç­”ã¯åˆã‚ã¦æŠ—åŸã«å‡ºä¼šã£ãŸã¨ãã®å…ç–«åå¿œã§ã€æŠ—ä½“ç”£ç”Ÿã¾ã§æ™‚é–“ãŒã‹ã‹ã‚‹ã€‚ã“ã®ã¨ãè¨˜æ†¶ç´°èƒãŒä½œã‚‰ã‚Œã‚‹ã€‚äºŒæ¬¡å¿œç­”ã¯åŒã˜æŠ—åŸã«å†ã³å‡ºä¼šã£ãŸã¨ãã®åå¿œã§ã€è¨˜æ†¶ç´°èƒãŒé€Ÿã‚„ã‹ã«åå¿œã—ã€ã‚ˆã‚Šå¤šãã®æŠ—ä½“ã‚’çŸ­æ™‚é–“ã§ç”£ç”Ÿã™ã‚‹ã€‚ã“ã‚ŒãŒãƒ¯ã‚¯ãƒãƒ³ã®åŸç†ã§ã‚ã‚‹ã€‚ã€ï¼ˆ120å­—ï¼‰' 
        }
      ]
    }
  ];

  // é¸æŠã•ã‚ŒãŸã‚«ãƒ†ã‚´ãƒªãƒ¼ã®ãƒ‡ãƒ¼ã‚¿
  const currentCategory = categories.find(c => c.id === selectedCategory);
  const currentQuestion = currentCategory?.questions[currentSubQIndex];
  const userAnswer = answers[currentSubQIndex]?.answer;
  const isSubmitted = answers[currentSubQIndex]?.submitted;
  const isCorrect = answers[currentSubQIndex]?.correct;

  // è§£ç­”ãƒã‚§ãƒƒã‚¯é–¢æ•°
  const checkAnswer = (userAns, correctAns) => {
    if (!userAns) return false;
    
    // è«–è¿°å•é¡Œã®å ´åˆã¯æ–‡å­—æ•°ã®ã¿ãƒã‚§ãƒƒã‚¯
    if (correctAns[0] === 'è‡ªç”±è¨˜è¿°') {
      return userAns.trim().length >= 50;
    }
    
    if (Array.isArray(correctAns)) {
      return correctAns.some(ans => 
        userAns.toLowerCase().trim() === ans.toLowerCase().trim()
      );
    }
    return userAns.toLowerCase().trim() === correctAns.toLowerCase().trim();
  };

  // è§£ç­”å‡¦ç†
  const handleAnswer = (value) => {
    const currentAnswer = answers[currentSubQIndex]?.answer;
    const newChangeCount = currentAnswer && currentAnswer !== value ? changeCount + 1 : changeCount;
    setChangeCount(newChangeCount);
    
    setAnswers({
      ...answers,
      [currentSubQIndex]: {
        ...answers[currentSubQIndex],
        answer: value,
        changes: newChangeCount
      }
    });
  };

  // ãƒ’ãƒ³ãƒˆè¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
  const handleHintToggle = () => {
    if (!showHint && hintViewTime === null) {
      const timeUntilHint = Math.round((Date.now() - questionStartTime) / 1000);
      setHintViewTime(timeUntilHint);
    }
    setShowHint(!showHint);
  };

  // è§£èª¬è¡¨ç¤ºåˆ‡ã‚Šæ›¿ãˆ
  const handleExplanationToggle = () => {
    if (!showExplanation && explanationViewTime === null) {
      const timeUntilExplanation = Math.round((Date.now() - questionStartTime) / 1000);
      setExplanationViewTime(timeUntilExplanation);
    }
    setShowExplanation(!showExplanation);
  };

  // è§£ç­”é€ä¿¡
  const handleSubmit = () => {
    const timeSpent = Math.round((Date.now() - questionStartTime) / 1000);
    const isCorrectAnswer = checkAnswer(userAnswer, currentQuestion.correctAnswer);
    
    setAnswers({
      ...answers,
      [currentSubQIndex]: {
        ...answers[currentSubQIndex],
        submitted: true,
        correct: isCorrectAnswer,
        timeSpent: timeSpent,
        changes: changeCount,
        usedHint: hintViewTime !== null,
        usedExplanation: explanationViewTime !== null,
        hintViewTime: hintViewTime,
        explanationViewTime: explanationViewTime
      }
    });
    setSubmitted(true);
  };

  // æ¬¡ã®å•é¡Œã¸
  const handleNext = () => {
    if (currentSubQIndex < currentCategory.questions.length - 1) {
      setCurrentSubQIndex(currentSubQIndex + 1);
      setSubmitted(false);
      setShowHint(false);
      setShowExplanation(false);
      setQuestionStartTime(Date.now());
      setChangeCount(0);
      setHintViewTime(null);
      setExplanationViewTime(null);
    } else {
      // ã‚«ãƒ†ã‚´ãƒªãƒ¼çµ‚äº† - è©³ç´°ãªçµæœã‚’ä¿å­˜
      const correctCount = Object.values(answers).filter(a => a.correct).length;
      const totalCount = currentCategory.questions.length;
      const wrongQuestions = currentCategory.questions.filter((q, idx) => !answers[idx]?.correct);
      
      // æ™‚é–“ãŒã‹ã‹ã£ãŸå•é¡Œ
      const avgTime = Object.values(answers).reduce((sum, a) => sum + (a.timeSpent || 0), 0) / totalCount;
      const slowQuestions = currentCategory.questions.filter((q, idx) => 
        answers[idx]?.timeSpent > avgTime * 1.5
      ).map((q) => ({
        ...q,
        timeSpent: answers[currentCategory.questions.indexOf(q)]?.timeSpent
      }));
      
      // è¿·ã£ãŸå•é¡Œ
      const hesitatedQuestions = currentCategory.questions.filter((q, idx) => 
        answers[idx]?.changes >= 2
      );
      
      // ãƒ’ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸå•é¡Œ
      const hintDependentQuestions = currentCategory.questions.filter((q, idx) => 
        answers[idx]?.usedHint || answers[idx]?.usedExplanation
      );
      
      // è©³ç´°ãªè¡Œå‹•ãƒ‡ãƒ¼ã‚¿
      const detailedAnswers = Object.keys(answers).map(idx => ({
        questionNumber: currentCategory.questions[idx].number,
        question: currentCategory.questions[idx].question,
        correct: answers[idx].correct,
        timeSpent: answers[idx].timeSpent,
        changes: answers[idx].changes,
        usedHint: answers[idx].usedHint,
        usedExplanation: answers[idx].usedExplanation,
        hintViewTime: answers[idx].hintViewTime,
        explanationViewTime: answers[idx].explanationViewTime
      }));
      
      const categoryResult = {
        name: currentCategory.name,
        total: totalCount,
        correct: correctCount,
        wrongQuestions: wrongQuestions,
        slowQuestions: slowQuestions,
        hesitatedQuestions: hesitatedQuestions,
        hintDependentQuestions: hintDependentQuestions,
        avgTime: Math.round(avgTime),
        detailedAnswers: detailedAnswers,
        timestamp: new Date().toISOString()
      };
      
      setAllResults({
        ...allResults,
        [selectedCategory]: categoryResult
      });
      
      setScreen('categoryAnalysis');
      generateAIAnalysis(categoryResult, false);
    }
  };

  // AIåˆ†æç”Ÿæˆ
  const generateAIAnalysis = async (categoryData, isOverall = false) => {
    setLoadingAnalysis(true);
    setAiAnalysis('');
    
    try {
      const prompt = isOverall 
        ? `ã‚ãªãŸã¯ç”Ÿç‰©åŸºç¤ã®å­¦ç¿’æŒ‡å°ã®å°‚é–€å®¶ã§ã™ã€‚ç”Ÿå¾’ä¸€äººã²ã¨ã‚Šã®å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã€å€‹åˆ¥æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

ä»¥ä¸‹ã®è©³ç´°ãªå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã—ã¦ãã ã•ã„ï¼š

${Object.entries(categoryData).map(([catId, data]) => {
  const hintUsageRate = data.detailedAnswers ? 
    Math.round((data.detailedAnswers.filter(a => a.usedHint || a.usedExplanation).length / data.total) * 100) : 0;
  return `ã€${data.name}ã€‘
- æ­£ç­”ç‡: ${Math.round(data.correct/data.total*100)}% (${data.correct}/${data.total}å•)
- å¹³å‡è§£ç­”æ™‚é–“: ${data.avgTime}ç§’
- ãƒ’ãƒ³ãƒˆä½¿ç”¨ç‡: ${hintUsageRate}%
- æ™‚é–“ãŒã‹ã‹ã£ãŸå•é¡Œ: ${data.slowQuestions?.length || 0}å•
- è¿·ã£ãŸå•é¡Œ: ${data.hesitatedQuestions?.length || 0}å•`;
}).join('\n\n')}

ä»¥ä¸‹ã®è¦³ç‚¹ã§250å­—ç¨‹åº¦ã®å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¦ãã ã•ã„ï¼š
1. ã“ã®ç”Ÿå¾’ã®å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ç‰¹å¾´ï¼ˆè§£ç­”é€Ÿåº¦ã€ãƒ’ãƒ³ãƒˆä¾å­˜åº¦ã€è¿·ã„ã®å‚¾å‘ãªã©ï¼‰
2. æœ€å„ªå…ˆã§å–ã‚Šçµ„ã‚€ã¹ãèª²é¡Œ
3. åŠ¹æœçš„ãªå­¦ç¿’æ–¹æ³•ï¼ˆã“ã®ç”Ÿå¾’ã«åˆã£ãŸå…·ä½“çš„ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒï¼‰
4. æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—`
        : `ã‚ãªãŸã¯ç”Ÿç‰©åŸºç¤ã®å­¦ç¿’æŒ‡å°ã®å°‚é–€å®¶ã§ã™ã€‚ã“ã®ç”Ÿå¾’ã®è©³ç´°ãªå­¦ç¿’è¡Œå‹•ã‚’åˆ†æã—ã€å€‹åˆ¥æœ€é©åŒ–ã•ã‚ŒãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¦ãã ã•ã„ã€‚

ã€ã‚«ãƒ†ã‚´ãƒªãƒ¼ã€‘${categoryData.name}
ã€æ­£ç­”ç‡ã€‘${Math.round(categoryData.correct/categoryData.total*100)}% (${categoryData.correct}/${categoryData.total}å•)
ã€å¹³å‡è§£ç­”æ™‚é–“ã€‘${categoryData.avgTime}ç§’

ã€è©³ç´°ãªè¡Œå‹•åˆ†æã€‘
${categoryData.detailedAnswers.map(a => 
  `å•${a.questionNumber}: ${a.question}
  - çµæœ: ${a.correct ? 'â—‹æ­£è§£' : 'Ã—ä¸æ­£è§£'}
  - æ™‚é–“: ${a.timeSpent}ç§’
  - è¿·ã„: ${a.changes}å›å¤‰æ›´
  - ãƒ’ãƒ³ãƒˆ: ${a.usedHint ? `å°ãƒ’ãƒ³ãƒˆ ${a.hintViewTime}ç§’å¾Œã«ç¢ºèª` : 'æœªä½¿ç”¨'}${a.usedExplanation ? `, å¤§ãƒ’ãƒ³ãƒˆ ${a.explanationViewTime}ç§’å¾Œã«ç¢ºèª` : ''}`
).join('\n\n')}

${categoryData.slowQuestions && categoryData.slowQuestions.length > 0 ? `
ã€æ™‚é–“ãŒã‹ã‹ã£ãŸå•é¡Œã€‘ï¼ˆå¹³å‡${categoryData.avgTime}ç§’ã®1.5å€ä»¥ä¸Šï¼‰
${categoryData.slowQuestions.map(q => `- å•${q.number}: ${q.question} (${q.timeSpent}ç§’)`).join('\n')}
â†’ ã“ã‚Œã‚‰ã¯ç†è§£ãŒä¸ååˆ†ãªå¯èƒ½æ€§ãŒé«˜ã„
` : ''}

${categoryData.hintDependentQuestions && categoryData.hintDependentQuestions.length > 0 ? `
ã€ãƒ’ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸå•é¡Œã€‘
${categoryData.hintDependentQuestions.map((q) => {
  const detail = categoryData.detailedAnswers.find(a => a.questionNumber === q.number);
  return `- å•${q.number}: ${q.question}${detail?.usedExplanation ? 'ï¼ˆå¤§ãƒ’ãƒ³ãƒˆã¾ã§ç¢ºèªï¼‰' : ''}`;
}).join('\n')}
` : ''}

ã“ã®ç”Ÿå¾’ã®å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’è¸ã¾ãˆã€200å­—ç¨‹åº¦ã§ä»¥ä¸‹ã‚’å«ã‚€å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã—ã¦ãã ã•ã„ï¼š
1. ã“ã®ç”Ÿå¾’ç‰¹æœ‰ã®å¼±ç‚¹ï¼ˆæ™‚é–“é…åˆ†ã€ç†è§£åº¦ã€ãƒ’ãƒ³ãƒˆä¾å­˜ãªã©ï¼‰
2. å„ªå…ˆçš„ã«å¾©ç¿’ã™ã¹ãå…·ä½“çš„ãªå†…å®¹
3. ã“ã®ç”Ÿå¾’ã«æœ€é©ãªå­¦ç¿’ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ`;

      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 1500,
          messages: [
            { role: 'user', content: prompt }
          ]
        })
      });

      if (!response.ok) {
        throw new Error(`API Error: ${response.status}`);
      }

      const data = await response.json();
      const analysisText = data.content?.find(c => c.type === 'text')?.text;
      
      if (!analysisText) {
        throw new Error('åˆ†æãƒ†ã‚­ã‚¹ãƒˆãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
      }
      
      setAiAnalysis(analysisText);
    } catch (error) {
      console.error('AIåˆ†æã‚¨ãƒ©ãƒ¼:', error);
      
      // ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼šè©³ç´°ãªæ‰‹å‹•åˆ†æ
      const hintUsage = categoryData.detailedAnswers?.filter(a => a.usedHint || a.usedExplanation).length || 0;
      const hintRate = Math.round((hintUsage / categoryData.total) * 100);
      
      setAiAnalysis(`ã€å­¦ç¿’ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã€‘

æ­£ç­”ç‡: ${Math.round((categoryData.correct / categoryData.total) * 100)}%
å¹³å‡è§£ç­”æ™‚é–“: ${categoryData.avgTime}ç§’
ãƒ’ãƒ³ãƒˆä½¿ç”¨ç‡: ${hintRate}%

${categoryData.slowQuestions?.length > 0 ? `âš ï¸ æ™‚é–“ãŒã‹ã‹ã£ãŸå•é¡ŒãŒ${categoryData.slowQuestions.length}å•ã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã‚‰ã®åˆ†é‡ã¯ç†è§£ãŒä¸ååˆ†ãªå¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ã€åŸºç¤ã‹ã‚‰å¾©ç¿’ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚

` : ''}${categoryData.hesitatedQuestions?.length > 0 ? `ğŸ¤” è¿·ã£ãŸå•é¡ŒãŒ${categoryData.hesitatedQuestions.length}å•ã‚ã‚Šã¾ã™ã€‚çŸ¥è­˜ãŒæ›–æ˜§ãªéƒ¨åˆ†ãŒã‚ã‚‹ãŸã‚ã€è©²å½“åˆ†é‡ã®ç¢ºèªå•é¡Œã‚’ç¹°ã‚Šè¿”ã—è§£ãã¾ã—ã‚‡ã†ã€‚

` : ''}${hintRate > 50 ? `ğŸ’¡ ãƒ’ãƒ³ãƒˆä½¿ç”¨ç‡ãŒé«˜ã‚ã§ã™ã€‚ã¾ãšã¯ãƒ’ãƒ³ãƒˆãªã—ã§è€ƒãˆã‚‹æ™‚é–“ã‚’ååˆ†ã«å–ã‚Šã€è‡ªåŠ›ã§è§£ç­”ã™ã‚‹åŠ›ã‚’ã¤ã‘ã¦ã„ãã¾ã—ã‚‡ã†ã€‚

` : ''}${categoryData.wrongQuestions?.length > 0 ? `é–“é•ãˆãŸ${categoryData.wrongQuestions.length}å•ã‚’é‡ç‚¹çš„ã«å¾©ç¿’ã—ã€ãªãœé–“é•ãˆãŸã®ã‹ã‚’ç†è§£ã™ã‚‹ã“ã¨ãŒé‡è¦ã§ã™ã€‚` : 'å…¨å•æ­£è§£ã§ã™ï¼ç´ æ™´ã‚‰ã—ã„æˆç¸¾ã§ã™ï¼'}`);
    } finally {
      setLoadingAnalysis(false);
    }
  };

  // ãƒªã‚»ãƒƒãƒˆ
  const handleReset = () => {
    setScreen('menu');
    setSelectedCategory(null);
    setCurrentSubQIndex(0);
    setAnswers({});
    setShowHint(false);
    setShowExplanation(false);
    setSubmitted(false);
    setAiAnalysis('');
    setQuestionStartTime(Date.now());
    setChangeCount(0);
    setHintViewTime(null);
    setExplanationViewTime(null);
  };

  // ã‚«ãƒ†ã‚´ãƒªãƒ¼é–‹å§‹
  const handleStartCategory = (categoryId) => {
    setSelectedCategory(categoryId);
    setScreen('question');
    setCurrentSubQIndex(0);
    setAnswers({});
    setShowHint(false);
    setShowExplanation(false);
    setSubmitted(false);
    setAiAnalysis('');
    setQuestionStartTime(Date.now());
    setChangeCount(0);
    setHintViewTime(null);
    setExplanationViewTime(null);
  };

  // å…¨ä½“åˆ†æè¡¨ç¤º
  const handleShowOverallAnalysis = () => {
    setScreen('overallAnalysis');
    generateAIAnalysis(allResults, true);
  };

  // é€²æ—è¨ˆç®—
  const totalSubQuestions = currentCategory?.questions.length || 0;
  const completedSubQuestions = Object.keys(answers).filter(k => answers[k].submitted).length;

  // ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”»é¢
  if (screen === 'menu') {
    const completedCategories = Object.keys(allResults).length;
    const totalCategories = categories.length;

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 p-4">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 className="text-3xl font-bold text-green-700 mb-2">ç”Ÿç‰©åŸºç¤ å­¦ç¿’ã‚¢ãƒ—ãƒª</h1>
            <div className="text-gray-600">å­¦ç¿’ã—ãŸã‚«ãƒ†ã‚´ãƒªãƒ¼: {completedCategories} / {totalCategories}</div>
          </div>

          {completedCategories > 0 && (
            <button
              onClick={handleShowOverallAnalysis}
              className="w-full mb-6 p-4 bg-gradient-to-r from-purple-500 to-indigo-500 hover:from-purple-600 hover:to-indigo-600 text-white rounded-lg font-semibold transition-all flex items-center justify-center gap-2"
            >
              <Lightbulb size={20} />
              å…¨ä½“ã®å­¦ç¿’åˆ†æã‚’è¦‹ã‚‹
            </button>
          )}

          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            {categories.map((category) => {
              const result = allResults[category.id];
              const percentage = result ? Math.round((result.correct / result.total) * 100) : null;

              return (
                <div
                  key={category.id}
                  onClick={() => handleStartCategory(category.id)}
                  className="bg-white rounded-lg shadow-md p-4 hover:shadow-lg transition-all cursor-pointer border-2 border-transparent hover:border-green-300"
                >
                  <h3 className="font-semibold text-lg mb-2">{category.name}</h3>
                  <div className="text-sm text-gray-600">{category.questions.length}å•</div>
                  {result && (
                    <div className="mt-2 pt-2 border-t">
                      <div className="flex items-center justify-between">
                        <span className="text-sm text-gray-600">å‰å›ã®çµæœ:</span>
                        <span className={`font-semibold ${percentage >= 80 ? 'text-green-600' : percentage >= 60 ? 'text-yellow-600' : 'text-red-600'}`}>
                          {percentage}ç‚¹
                        </span>
                      </div>
                    </div>
                  )}
                </div>
              );
            })}
          </div>
        </div>
      </div>
    );
  }

  // å•é¡Œç”»é¢
  if (screen === 'question' && currentQuestion) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 p-4">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 className="text-3xl font-bold text-green-700 mb-2">ç”Ÿç‰©åŸºç¤ å­¦ç¿’ã‚¢ãƒ—ãƒª</h1>
            <div className="flex items-center gap-4">
              <span className="text-gray-600">é€²æ—: {completedSubQuestions} / {totalSubQuestions}</span>
              <div className="flex-1 bg-gray-200 rounded-full h-2">
                <div 
                  className="bg-green-600 h-2 rounded-full transition-all"
                  style={{ width: `${(completedSubQuestions / totalSubQuestions) * 100}%` }}
                />
              </div>
            </div>
          </div>

          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h2 className="text-xl font-bold text-gray-800 mb-4">{currentCategory.title}</h2>
            
            {currentCategory.text && (
              <div className="bg-gray-50 p-4 rounded-lg mb-6 text-sm leading-relaxed whitespace-pre-line border-l-4 border-green-300">
                {currentCategory.text}
              </div>
            )}

            <div className="border-t pt-4">
              <h3 className="text-lg font-semibold mb-4">å•{currentQuestion.number}: {currentQuestion.question}</h3>

              {currentQuestion.type === 'choice' ? (
                <div className="grid grid-cols-1 gap-2 mb-4">
                  {currentQuestion.choices.map((choice, idx) => (
                    <button
                      key={idx}
                      onClick={() => !isSubmitted && handleAnswer(choice)}
                      disabled={isSubmitted}
                      className={`p-3 rounded-lg text-left transition-all ${
                        userAnswer === choice
                          ? isSubmitted
                            ? isCorrect
                              ? 'bg-green-100 border-2 border-green-500'
                              : 'bg-red-100 border-2 border-red-500'
                            : 'bg-green-100 border-2 border-green-500'
                          : isSubmitted && currentQuestion.correctAnswer.includes(choice)
                          ? 'bg-green-50 border-2 border-green-300'
                          : 'bg-gray-50 border border-gray-300 hover:bg-gray-100'
                      } ${isSubmitted ? 'cursor-default' : 'cursor-pointer'}`}
                    >
                      <div className="flex items-center gap-2">
                        {isSubmitted && currentQuestion.correctAnswer.includes(choice) && (
                          <CheckCircle className="text-green-600" size={20} />
                        )}
                        {isSubmitted && userAnswer === choice && !isCorrect && (
                          <XCircle className="text-red-600" size={20} />
                        )}
                        <span>{choice}</span>
                      </div>
                    </button>
                  ))}
                </div>
              ) : (
                <div className="mb-4">
                  <textarea
                    value={userAnswer || ''}
                    onChange={(e) => !isSubmitted && handleAnswer(e.target.value)}
                    disabled={isSubmitted}
                    placeholder="è§£ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ï¼ˆè«–è¿°å•é¡Œã®å ´åˆã¯50å­—ä»¥ä¸Šï¼‰"
                    rows={currentQuestion.correctAnswer[0] === 'è‡ªç”±è¨˜è¿°' ? 5 : 2}
                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"
                  />
                  {userAnswer && userAnswer.trim().length > 0 && (
                    <div className="text-sm text-gray-600 mt-1">
                      ç¾åœ¨ã®æ–‡å­—æ•°: {userAnswer.trim().length}å­—
                    </div>
                  )}
                  {isSubmitted && (
                    <div className={`mt-2 p-2 rounded ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                      {currentQuestion.correctAnswer[0] === 'è‡ªç”±è¨˜è¿°' 
                        ? isCorrect 
                          ? 'æ­£è§£ï¼50å­—ä»¥ä¸Šã§è¨˜è¿°ã•ã‚Œã¦ã„ã¾ã™ã€‚' 
                          : 'ä¸æ­£è§£ã€€50å­—ä»¥ä¸Šã§è¨˜è¿°ã—ã¦ãã ã•ã„ã€‚'
                        : isCorrect 
                          ? 'æ­£è§£ï¼' 
                          : `ä¸æ­£è§£ã€€æ­£è§£: ${Array.isArray(currentQuestion.correctAnswer) ? currentQuestion.correctAnswer[0] : currentQuestion.correctAnswer}`
                      }
                    </div>
                  )}
                </div>
              )}

              <div className="flex gap-2 mb-4">
                <button
                  onClick={handleHintToggle}
                  className="flex items-center gap-2 px-4 py-2 bg-yellow-100 hover:bg-yellow-200 text-yellow-800 rounded-lg transition-all"
                >
                  <Lightbulb size={18} />
                  {showHint ? 'å°ãƒ’ãƒ³ãƒˆã‚’éè¡¨ç¤º' : 'ğŸ’¡å°ãƒ’ãƒ³ãƒˆã‚’è¦‹ã‚‹'}
                </button>
                
                <button
                  onClick={handleExplanationToggle}
                  className="flex items-center gap-2 px-4 py-2 bg-blue-100 hover:bg-blue-200 text-blue-800 rounded-lg transition-all"
                >
                  <BookOpen size={18} />
                  {showExplanation ? 'å¤§ãƒ’ãƒ³ãƒˆã‚’éè¡¨ç¤º' : 'ğŸ“å¤§ãƒ’ãƒ³ãƒˆ(è§£èª¬)ã‚’è¦‹ã‚‹'}
                </button>
              </div>

              {showHint && (
                <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 rounded">
                  <p className="text-sm text-yellow-800">ğŸ’¡ {currentQuestion.hint}</p>
                </div>
              )}

              {showExplanation && (
                <div className="bg-blue-50 border-l-4 border-blue-400 p-4 mb-4 rounded">
                  <p className="text-sm text-blue-800">ğŸ“ {currentQuestion.explanation}</p>
                </div>
              )}

              {!isSubmitted ? (
                <button
                  onClick={handleSubmit}
                  disabled={!userAnswer}
                  className={`w-full py-3 rounded-lg font-semibold transition-all ${
                    userAnswer
                      ? 'bg-green-600 hover:bg-green-700 text-white'
                      : 'bg-gray-300 text-gray-500 cursor-not-allowed'
                  }`}
                >
                  è§£ç­”ã™ã‚‹
                </button>
              ) : (
                <div>
                  <div className={`p-4 rounded-lg mb-4 ${
                    isCorrect ? 'bg-green-100 border border-green-300' : 'bg-red-100 border border-red-300'
                  }`}>
                    <div className="flex items-center gap-2">
                      {isCorrect ? (
                        <>
                          <CheckCircle className="text-green-600" size={24} />
                          <span className="text-green-800 font-semibold">æ­£è§£ï¼</span>
                        </>
                      ) : (
                        <>
                          <XCircle className="text-red-600" size={24} />
                          <span className="text-red-800 font-semibold">ä¸æ­£è§£</span>
                        </>
                      )}
                    </div>
                  </div>

                  <button
                    onClick={handleNext}
                    className="w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-all"
                  >
                    {currentSubQIndex < currentCategory.questions.length - 1 ? 'æ¬¡ã®å•é¡Œã¸' : 'çµæœã‚’è¦‹ã‚‹'}
                  </button>
                </div>
              )}
            </div>
          </div>
        </div>
      </div>
    );
  }

  // ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†æç”»é¢
  if (screen === 'categoryAnalysis') {
    const result = allResults[selectedCategory];
    if (!result) return null;

    const percentage = Math.round((result.correct / result.total) * 100);
    const pieData = [
      { name: 'æ­£è§£', value: result.correct, color: '#10b981' },
      { name: 'ä¸æ­£è§£', value: result.total - result.correct, color: '#ef4444' }
    ];

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 p-4">
        <div className="max-w-4xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 className="text-2xl font-bold text-green-700 mb-4">ã‚«ãƒ†ã‚´ãƒªãƒ¼çµæœ</h1>
            
            <div className="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 mb-6">
              <h3 className="text-xl font-semibold mb-2">{result.name}</h3>
              <div className="text-5xl font-bold text-green-600 mb-2">{percentage}ç‚¹</div>
              <div className="text-gray-700">{result.correct} / {result.total} å•æ­£è§£</div>
              {result.avgTime && (
                <div className="text-gray-600 mt-2">å¹³å‡è§£ç­”æ™‚é–“: {result.avgTime}ç§’</div>
              )}
            </div>

            <div className="mb-6">
              <h4 className="text-lg font-semibold mb-4">æ­£ç­”ç‡</h4>
              <ResponsiveContainer width="100%" height={250}>
                <PieChart>
                  <Pie
                    data={pieData}
                    cx="50%"
                    cy="50%"
                    labelLine={false}
                    label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}
                    outerRadius={80}
                    fill="#8884d8"
                    dataKey="value"
                  >
                    {pieData.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                </PieChart>
              </ResponsiveContainer>
            </div>

            {result.slowQuestions && result.slowQuestions.length > 0 && (
              <div className="mb-6">
                <h4 className="text-lg font-semibold mb-3">â±ï¸ æ™‚é–“ãŒã‹ã‹ã£ãŸå•é¡Œï¼ˆç†è§£ä¸è¶³ã®å¯èƒ½æ€§ï¼‰</h4>
                <div className="space-y-2">
                  {result.slowQuestions.map((q, idx) => (
                    <div key={idx} className="p-3 bg-orange-50 rounded-lg border border-orange-200">
                      <div className="flex justify-between items-center">
                        <span><span className="font-semibold">å•{q.number}:</span> {q.question}</span>
                        <span className="text-orange-700 font-semibold">{q.timeSpent}ç§’</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            )}

            {result.hesitatedQuestions && result.hesitatedQuestions.length > 0 && (
              <div className="mb-6">
                <h4 className="text-lg font-semibold mb-3">ğŸ¤” è¿·ã£ãŸå•é¡Œï¼ˆé¸æŠã‚’è¤‡æ•°å›å¤‰æ›´ï¼‰</h4>
                <div className="space-y-2">
                  {result.hesitatedQuestions.map((q, idx) => (
                    <div key={idx} className="p-3 bg-yellow-50 rounded-lg border border-yellow-200">
                      <span className="font-semibold">å•{q.number}:</span> {q.question}
                    </div>
                  ))}
                </div>
              </div>
            )}

            {result.hintDependentQuestions && result.hintDependentQuestions.length > 0 && (
              <div className="mb-6">
                <h4 className="text-lg font-semibold mb-3">ğŸ’¡ ãƒ’ãƒ³ãƒˆã‚’ä½¿ç”¨ã—ãŸå•é¡Œ</h4>
                <div className="space-y-2">
                  {result.hintDependentQuestions.map((q, idx) => {
                    const detail = result.detailedAnswers?.find(a => a.questionNumber === q.number);
                    return (
                      <div key={idx} className="p-3 bg-blue-50 rounded-lg border border-blue-200">
                        <div className="flex justify-between items-start">
                          <span><span className="font-semibold">å•{q.number}:</span> {q.question}</span>
                          <div className="text-sm text-blue-700">
                            {detail?.usedHint && <div>å°ãƒ’ãƒ³ãƒˆä½¿ç”¨</div>}
                            {detail?.usedExplanation && <div>å¤§ãƒ’ãƒ³ãƒˆä½¿ç”¨</div>}
                          </div>
                        </div>
                      </div>
                    );
                  })}
                </div>
              </div>
            )}

            {result.wrongQuestions.length > 0 && (
              <div className="mb-6">
                <h4 className="text-lg font-semibold mb-3">âŒ é–“é•ãˆãŸå•é¡Œ</h4>
                <div className="space-y-2">
                  {result.wrongQuestions.map((q, idx) => (
                    <div key={idx} className="p-3 bg-red-50 rounded-lg border border-red-200">
                      <span className="font-semibold">å•{q.number}:</span> {q.question}
                    </div>
                  ))}
                </div>
              </div>
            )}

            <div className="bg-blue-50 border-l-4 border-blue-400 p-6 mb-6 rounded">
              <h4 className="text-lg font-semibold mb-3 flex items-center gap-2">
                <Lightbulb className="text-blue-600" />
                AIåˆ†æ
              </h4>
              {loadingAnalysis ? (
                <div className="text-gray-600">AIãŒè©³ç´°åˆ†æä¸­...</div>
              ) : (
                <p className="text-gray-700 whitespace-pre-line">{aiAnalysis}</p>
              )}
            </div>

            <div className="flex gap-3">
              <button
                onClick={handleReset}
                className="flex-1 py-3 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg font-semibold transition-all"
              >
                ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹
              </button>
              <button
                onClick={() => handleStartCategory(selectedCategory)}
                className="flex-1 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-all"
              >
                ã‚‚ã†ä¸€åº¦æŒ‘æˆ¦
              </button>
            </div>
          </div>
        </div>
      </div>
    );
  }

  // å…¨ä½“åˆ†æç”»é¢
  if (screen === 'overallAnalysis') {
    const totalQuestions = Object.values(allResults).reduce((sum, r) => sum + r.total, 0);
    const totalCorrect = Object.values(allResults).reduce((sum, r) => sum + r.correct, 0);
    const overallPercentage = Math.round((totalCorrect / totalQuestions) * 100);

    const chartData = Object.entries(allResults).map(([id, data]) => ({
      name: data.name.replace(/å¤§å•[ä¸€äºŒä¸‰å››äº”å…­]ï¼š/, ''),
      æ­£ç­”ç‡: Math.round((data.correct / data.total) * 100)
    }));

    const sortedByAccuracy = [...Object.entries(allResults)].sort((a, b) => 
      (b[1].correct / b[1].total) - (a[1].correct / a[1].total)
    );
    const topCategories = sortedByAccuracy.slice(0, 3);
    const weakCategories = sortedByAccuracy.slice(-3).reverse();

    return (
      <div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 p-4">
        <div className="max-w-6xl mx-auto">
          <div className="bg-white rounded-lg shadow-lg p-6 mb-6">
            <h1 className="text-2xl font-bold text-green-700 mb-4">å…¨ä½“å­¦ç¿’åˆ†æ</h1>
            
            <div className="bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6 mb-6">
              <div className="text-5xl font-bold text-green-600 mb-2">{overallPercentage}ç‚¹</div>
              <div className="text-gray-700">å…¨ä½“æ­£ç­”ç‡: {totalCorrect} / {totalQuestions} å•</div>
            </div>

            <div className="mb-6">
              <h4 className="text-lg font-semibold mb-4">ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥æ­£ç­”ç‡</h4>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={chartData}>
                  <CartesianGrid strokeDasharray="3 3" />
                  <XAxis dataKey="name" angle={-45} textAnchor="end" height={100} />
                  <YAxis domain={[0, 100]} />
                  <Tooltip />
                  <Bar dataKey="æ­£ç­”ç‡" fill="#10b981" />
                </BarChart>
              </ResponsiveContainer>
            </div>

            <div className="grid md:grid-cols-2 gap-6 mb-6">
              <div className="bg-green-50 border-l-4 border-green-400 p-4 rounded">
                <h4 className="font-semibold text-green-800 mb-3">ğŸ’ª å¾—æ„åˆ†é‡ TOP3</h4>
                <div className="space-y-2">
                  {topCategories.map(([id, data]) => (
                    <div key={id} className="text-sm">
                      <div className="flex justify-between">
                        <span>{data.name}</span>
                        <span className="font-semibold text-green-700">
                          {Math.round((data.correct / data.total) * 100)}%
                        </span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>

              <div className="bg-red-50 border-l-4 border-red-400 p-4 rounded">
                <h4 className="font-semibold text-red-800 mb-3">ğŸ“š å¾©ç¿’ãŒå¿…è¦ãªåˆ†é‡ TOP3</h4>
                <div className="space-y-2">
                  {weakCategories.map(([id, data]) => (
                    <div key={id} className="text-sm">
                      <div className="flex justify-between">
                        <span>{data.name}</span>
                        <span className="font-semibold text-red-700">
                          {Math.round((data.correct / data.total) * 100)}%
                        </span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="bg-purple-50 border-l-4 border-purple-400 p-6 mb-6 rounded">
              <h4 className="text-lg font-semibold mb-3 flex items-center gap-2">
                <Lightbulb className="text-purple-600" />
                AIç·åˆåˆ†æ
              </h4>
              {loadingAnalysis ? (
                <div className="text-gray-600">AIãŒç·åˆåˆ†æä¸­...</div>
              ) : (
                <p className="text-gray-700 whitespace-pre-line">{aiAnalysis}</p>
              )}
            </div>

            <button
              onClick={handleReset}
              className="w-full py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-all"
            >
              ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã«æˆ»ã‚‹
            </button>
          </div>
        </div>
      </div>
    );
  }

  return null;
};

export default StudyApp;